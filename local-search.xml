<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ginå­¦ä¹ è®°å½•-ä¸­é—´ä»¶å’Œè·¯ç”±</title>
    <link href="/2023/08/26/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%B7%AF%E7%94%B1/"/>
    <url>/2023/08/26/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E8%B7%AF%E7%94%B1/</url>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/08/26/KnkYaivqlSDmMA8.png" alt="æ˜æ—¥é¦™"></p><h1 id="6-gin-ä¸­é—´ä»¶å’Œè·¯ç”±"><a href="#6-gin-ä¸­é—´ä»¶å’Œè·¯ç”±" class="headerlink" title="6. gin ä¸­é—´ä»¶å’Œè·¯ç”±"></a>6. gin ä¸­é—´ä»¶å’Œè·¯ç”±</h1><p>æŠŠè¯·æ±‚çš„å¤„ç†å‡½æ•°å«åšä¸­é—´ä»¶ï¼Œä¸”å½¢å‚å¿…é¡»æ˜¯<code>*gin.Context</code> ä¸€ä¸ªè¯·æ±‚å¯ä»¥æœ‰å¤šä¸ªä¸­é—´ä»¶<br>é€šè¿‡Use()å‡½æ•°æ¥è°ƒç”¨ä¸­é—´ä»¶  </p><span id="more"></span><h2 id="6-1-å•ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶"><a href="#6-1-å•ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶" class="headerlink" title="6.1 å•ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶"></a>6.1 å•ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶</h2><ul><li><p>Next() ä¼šå°†å½“å‰ä¸­é—´ä»¶å‰ååˆ†ç¦»ï¼Œå‰é¢çš„ä¸ºè¯·æ±‚ä¸­é—´ä»¶ï¼Œåé¢çš„ä¸ºå“åº”ä¸­é—´ä»¶<br>  æ‰§è¡Œå®Œå‰é¢é‡åˆ°Next()å°±æ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œ<strong>æŠŠå“åº”ä¸­é—´ä»¶å‹å…¥æ ˆä¸­ï¼ˆå¤§æ¦‚æ•ˆæœæ˜¯è¿™æ ·ï¼‰ã€‚</strong></p></li><li><p>Abort() ä¼šæ‹¦æˆªæ‰§è¡Œåé¢çš„ä¸­é—´ä»¶ï¼Œä½†å½“å‰ä¸­é—´ä»¶åé¢çš„ä»£ç ä»ä¼šæ‰§è¡Œå®Œ</p></li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">m1</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;m1 in&quot;</span>)  <br>    c.Next()  <br>    c.Abort() <span class="hljs-comment">// æ­¤æ—¶Abortåœ¨Nextåé¢ï¼Œm1çš„å‰©ä½™éƒ¨åˆ†æ˜¯æœ€åä¸€ä¸ªè¢«æ‰§è¡Œçš„ï¼Œä¹‹åæ²¡æœ‰å…¶ä»–ä¸­é—´ä»¶  </span><br>    fmt.Println(<span class="hljs-string">&quot;m1 out&quot;</span>)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">m2</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;m2 in&quot;</span>)  <br>    c.Next()  <br>    fmt.Println(<span class="hljs-string">&quot;m2 out&quot;</span>)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">m3</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;m3 in&quot;</span>)  <br>    c.Next()  <br>    fmt.Println(<span class="hljs-string">&quot;m3 out&quot;</span>)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">m4</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;m4 in&quot;</span>)  <br>    c.Next()  <br>    fmt.Println(<span class="hljs-string">&quot;m4 out&quot;</span>)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">m5</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;m5 in&quot;</span>)  <br>    c.Next()  <br>    fmt.Println(<span class="hljs-string">&quot;m5 out&quot;</span>)  <br>&#125;  <br>  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>    router := gin.Default()  <br> <br>    <span class="hljs-comment">// å•ä¸ªä¸­é—´ä»¶  </span><br>    router.GET(<span class="hljs-string">&quot;/single&quot;</span>, m1, m2, m3)  <br>    <span class="hljs-comment">/* </span><br><span class="hljs-comment">    ç»“æœ:</span><br><span class="hljs-comment">    m1 in  </span><br><span class="hljs-comment">    m2 in  </span><br><span class="hljs-comment">    m3 in  </span><br><span class="hljs-comment">    m3 out  </span><br><span class="hljs-comment">    m2 out  </span><br><span class="hljs-comment">    m1 out  </span><br><span class="hljs-comment">    */</span><br>    <br>    <span class="hljs-comment">// ä½¿ç”¨å…¨å±€ä¸­é—´ä»¶ ä¸éœ€è¦åŒ¹é…è·¯å¾„ï¼Œç›´æ¥ç”¨  </span><br>    router.Use(m4, m5)  <br><br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-built_in">panic</span>(err)  <br>    &#125;  <br>&#125;  <br></code></pre></td></tr></table></figure><ul><li>é€šè¿‡ä¸­é—´ä»¶ä¼ é€’æ•°æ®å¹¶æ¥æ”¶ key-value</li></ul><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> &#123;  <br>    Name <span class="hljs-type">string</span>  <br>    Age <span class="hljs-type">int</span>  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">set</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    <span class="hljs-comment">// è®¾ç½®kv  </span><br>    c.Set(<span class="hljs-string">&quot;note&quot;</span>, <span class="hljs-string">&quot;è¿™æ˜¯ä¸€æ¡kvè®¾ç½®&quot;</span>)  <br><br>    <span class="hljs-comment">// è®¾ç½®ç»“æ„ä½“æ•°æ®  </span><br>    c.Set(<span class="hljs-string">&quot;user&quot;</span>, User&#123;  <br>        Name: <span class="hljs-string">&quot;kjasn&quot;</span>,  <br>        Age: <span class="hljs-number">11</span>,  <br>    &#125;)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>    router := gin.Default()  <br><br>    <span class="hljs-comment">// ä½¿ç”¨å…¨å±€ä¸­é—´ä»¶ ä¸éœ€è¦åŒ¹é…è·¯å¾„ï¼Œç›´æ¥ç”¨  </span><br>    router.Use(_set)  <br><br>    router.GET(<span class="hljs-string">&quot;/setVal&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>        <span class="hljs-comment">// ç”¨Get()æ¥æ”¶ å½¢å‚æ˜¯key è¿”å›anyç±»å‹çš„valå’Œä¸€ä¸ªboolå€¼è¡¨ç¤ºæ˜¯å¦å­˜åœ¨key  </span><br>        <span class="hljs-comment">// æ¥æ”¶å•ç‹¬è®¾ç½®çš„kv  </span><br>        note, ok := c.Get(<span class="hljs-string">&quot;note&quot;</span>)  <br>        <span class="hljs-keyword">if</span> ok &#123;  <br>            fmt.Println(note)  <br>        &#125;  <br><br>    <span class="hljs-comment">////////////////////////////////////////////////////////////</span><br>        <span class="hljs-comment">// æ¥æ”¶ç»“æ„ä½“ kv  </span><br>        user, ok := c.Get(<span class="hljs-string">&quot;user&quot;</span>)  <br>        <span class="hljs-keyword">if</span> ok &#123;  <br>            <span class="hljs-comment">// ç›´æ¥æ‰“å°æ•´ä¸ªuser  </span><br>            fmt.Println(user)  <br>            c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: user&#125;)  <br><br>            <span class="hljs-comment">// å•ç‹¬æ‰“å° éœ€è¦æ–­è¨€ä¸ºUserç±»å‹æ‰èƒ½è®¿é—®Userç±»å‹çš„å±æ€§  </span><br>            fmt.Println(<span class="hljs-string">&quot;æ–­è¨€&quot;</span>)  <br>            _user, ok := user.(User) <span class="hljs-comment">// æ–­è¨€æˆåŠŸ _user æ¥æ”¶åˆ°userçš„ç±»å‹ï¼Œè‹¥å¤±è´¥åˆ™ä¸ºç©º  </span><br>            <span class="hljs-keyword">if</span> ok &#123;  <br>                fmt.Println(<span class="hljs-string">&quot;å§“åï¼š&quot;</span>, _user.Name, <span class="hljs-string">&quot;å¹´é¾„ï¼š&quot;</span>, _user.Age)  <br>                c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;name&quot;</span>: _user.Name, <span class="hljs-string">&quot;age&quot;</span>: _user.Age&#125;)  <br>            &#125; <span class="hljs-keyword">else</span> &#123;  <br>                fmt.Println(<span class="hljs-string">&quot;æ–­è¨€å¤±è´¥ï¼Œä¸æ˜¯Userç±»å‹&quot;</span>)  <br>            &#125;  <br>        &#125;  <br>    &#125;)  <br>    <br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-built_in">panic</span>(err)  <br>    &#125;  <br>&#125;  <br><span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">## 6.2 è·¯ç”±åˆ†ç»„  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">å°†ä¸€ç³»åˆ—çš„è·¯ç”±æ”¾åˆ°ä¸€ä¸ªç»„ä¸‹ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œä¸ºåˆ†ç»„è·¯ç”±å®šä¹‰å…¨å±€ä¸­é—´ä»¶åŒå•ä¸ªè·¯ç”±å®šä¹‰å…¨å±€ä¸­é—´ä»¶ä¸€æ ·ï¼Œç”¨Use()å‡½æ•°  </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">- å®šä¹‰ä¸€äº›éœ€è¦çš„ç»“æ„ä½“  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span>  <br>  <br><span class="hljs-comment">// å°è£…å“åº”æ ¼å¼  </span><br><span class="hljs-keyword">type</span> Response <span class="hljs-keyword">struct</span> &#123;  <br>    Code <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;code&quot;`</span>  <br>    Date any <span class="hljs-string">`json:&quot;date&quot;`</span>  <br>    Message <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;msg&quot;`</span>  <br>&#125;  <br>  <br><span class="hljs-keyword">type</span> UserInfo <span class="hljs-keyword">struct</span> &#123;  <br>    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot;`</span>  <br>    Age <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;age&quot;`</span>  <br>&#125;  <br>  <br><span class="hljs-keyword">type</span> ArticleInfo <span class="hljs-keyword">struct</span> &#123;  <br>    Title <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;title&quot;`</span>  <br>    Content <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;content&quot;`</span>  <br>&#125;  <br><span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">- å®šä¹‰ä¸­é—´ä»¶  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span>  <br><span class="hljs-comment">// æ­¤å¤„ç›´æ¥å†…å®šä¸€äº›ç®€å•çš„æ•°æ®</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DisplayUserList</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    list := []UserInfo&#123;  <br>        &#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-number">23</span>&#125;,  <br>        &#123;<span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-number">45</span>&#125;,  <br>    &#125;  <br><br>    c.JSON(http.StatusOK, Response&#123;Code: <span class="hljs-number">1</span>, Date: list, Message: <span class="hljs-string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span>&#125;)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DisplayArticle</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    list := []ArticleInfo &#123;  <br>        &#123;<span class="hljs-string">&quot;cè¯­è¨€å…¥é—¨åˆ°å…¥åœŸ&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ˜¯cè¯­è¨€å…¥é—¨æ•™ç¨‹,é¢å‘å…¥åœŸ&quot;</span>&#125;,  <br>        &#123;<span class="hljs-string">&quot;æ•°æ®åº“ä»åˆ åº“åˆ°è·‘è·¯&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ•™ä½ å¦‚ä½•ä»åˆ åº“åˆ°è·‘è·¯&quot;</span>&#125;,  <br>    &#125;  <br><br>    c.JSON(http.StatusOK, Response&#123;Code: <span class="hljs-number">1</span>, Date: list, Message: <span class="hljs-string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span>&#125;)  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showTest</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>    fmt.Println(<span class="hljs-string">&quot;showTest in &quot;</span>)  <br>    c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªç”¨æ¥æµ‹è¯•çš„ä¸­é—´ä»¶&quot;</span>&#125;)  <br>&#125;  <br><span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">- æ‹†åˆ†å‡ºæ¥ï¼Œè¿™æ ·ä¹Ÿæ–¹ä¾¿å•ç‹¬æˆåŒ…  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">UserRouterInit</span><span class="hljs-params">(api *gin.RouterGroup)</span></span> &#123;  <br>    <span class="hljs-comment">// ç”¨æˆ·ç®¡ç†åˆ†ç»„ å°†userManagementä½œä¸ºapiä¸‹çš„ä¸€ä¸ªç»„ åŒä¸€ä¸ªç»„å†…çš„è¯·æ±‚ä¸€èˆ¬æ”¾åœ¨ä¸€ä¸ªå¤§æ‹¬å·é‡Œ  </span><br>    <span class="hljs-comment">// å‘å‡ºè¯·æ±‚ http://127.0.0.1/api/user-management/user  </span><br>    userManagement := api.Group(<span class="hljs-string">&quot;user-management&quot;</span>) &#123;  <br>        <span class="hljs-comment">// ä»¥ä¸‹æ˜¯userManagementåˆ†ç»„ä¸‹çš„ä¸€äº›è¯·æ±‚  </span><br>        userManagement.GET(<span class="hljs-string">&quot;/user&quot;</span>, DisplayUserList)  <br>        <span class="hljs-comment">// ......</span><br>    &#125;  <br>&#125;  <br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ArticleRouterInit</span><span class="hljs-params">(api *gin.RouterGroup)</span></span> &#123;  <br>    <span class="hljs-comment">// æ–‡ç« ç®¡ç†åˆ†ç»„ å°†article-managementä½œä¸ºapiä¸‹çš„ä¸€ä¸ªç»„ ä¸userManagementå¹¶åˆ—  </span><br>    <span class="hljs-comment">// å‘å‡ºè¯·æ±‚ http://127.0.0.1/api/article-management/article  </span><br>    article := api.Group(<span class="hljs-string">&quot;article-management&quot;</span>) &#123;<br>        <span class="hljs-comment">// ä»¥ä¸‹æ˜¯article-managementåˆ†ç»„ä¸‹çš„ä¸€äº›è¯·æ±‚ï¼Œå°±åƒä¹‹å‰å†™çš„ä¸€æ · æ­¤å¤„ç®€å†™  </span><br>        article.GET(<span class="hljs-string">&quot;/article&quot;</span>, DisplayArticle)  <br>        <span class="hljs-comment">// ..........</span><br>    &#125;  <br>&#125;  <br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Test</span><span class="hljs-params">(api *gin.RouterGroup)</span></span> &#123;  <br>    <span class="hljs-comment">// ä¸ºtestç»„æ³¨å†ŒshowTestå…¨å±€ä¸­é—´ä»¶ï¼Œè¯¥ç»„ä¸‹çš„å­ç»„éƒ½ä¼šç”¨åˆ°è¿™ä¸ªä¸­é—´ä»¶  </span><br>    test := api.Group(<span class="hljs-string">&quot;test&quot;</span>).Use(showTest) &#123; <br>        test.GET(<span class="hljs-string">&quot;show1&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>            fmt.Println(<span class="hljs-string">&quot;in show1&quot;</span>)  <br>        &#125;)  <br>        test.GET(<span class="hljs-string">&quot;show2&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>            fmt.Println(<span class="hljs-string">&quot;in show2&quot;</span>)  <br>        &#125;)  <br>    &#125;  <br>&#125;  <br><span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">- åœ¨main()ä¸­åˆ†ç»„ç„¶åç›´æ¥è°ƒç”¨æ‹†åˆ†å‡ºæ¥çš„åŒ…å³å¯  </span><br><span class="hljs-string">åˆ†ç»„ä¹‹åï¼Œè¯·æ±‚å½“å‰ç»„ä¸‹çš„å…¶ä»–åˆ†ç»„éœ€è¦åŠ ä¸Šçˆ¶ç»„çš„è·¯å¾„ä½œä¸ºå‰ç¼€  </span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span>  <br><span class="hljs-comment">// åˆ†ç»„ </span><br>api := router.Group(<span class="hljs-string">&quot;api&quot;</span>) <span class="hljs-comment">// è¿”å›ä¸€ä¸ªç»„  </span><br>  <br>UserRouterInit(api)  <br>ArticleRouterInit(api)  <br>Test(api)<br><span class="hljs-string">``</span><span class="hljs-string">`  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">## 6.3 è®²è®²gin.Default()å’Œgin.New()  </span><br><span class="hljs-string">  </span><br><span class="hljs-string">- gin.New() æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„**ç©ºç™½å¼•æ“**ï¼Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¸­é—´ä»¶ã€‚è€Œ**gin.Default()ä¸­è°ƒç”¨äº†gin.New()å¹¶æ·»åŠ ä¸¤ä¸ªä¸­é—´ä»¶ gin.Logger(), gin.Recovery()ï¼Œè¿™æ˜¯äºŒè€…çš„ä¸»è¦åŒºåˆ«ã€‚  **</span><br><span class="hljs-string">  </span><br><span class="hljs-string">- gin.Logger() : è®°å½•è¯·æ±‚æ—¥å¿—ï¼šåœ¨æ¯æ¬¡è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œè®°å½•è¯·æ±‚çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€è¯·æ±‚çš„è·¯å¾„ã€è¯·æ±‚çš„ IP åœ°å€ç­‰ã€‚  </span><br><span class="hljs-string">- gin.Recovery() : æ¢å¤ä»é”™è¯¯ä¸­æ¢å¤ï¼šåœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œæ•è·æ½œåœ¨çš„å¼‚å¸¸ï¼Œæ¯”å¦‚ä»£ç å‡ºç°äº†æ„å¤–çš„é”™è¯¯æˆ–å´©æºƒã€‚å®ƒä¼šç¡®ä¿åº”ç”¨ä¸ä¼šå› ä¸ºå¼‚å¸¸è€Œå®Œå…¨å´©æºƒï¼Œè€Œæ˜¯å°½é‡å°†å¼‚å¸¸ä¿¡æ¯è®°å½•ä¸‹æ¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªå‹å¥½çš„é”™è¯¯å“åº”ç»™å®¢æˆ·ç«¯ ã€‚</span><br><span class="hljs-string">  </span><br><span class="hljs-string">`</span><span class="hljs-string">``</span><span class="hljs-keyword">go</span>  <br><span class="hljs-comment">// ä»¥ä¸‹å°±ç­‰åŒäºç”¨gin.Default()  </span><br>router := gin.New()  <br>router.Use(gin.Logger(), gin.Recovery())  <br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>go</tag>
      
      <tag>gin</tag>
      
      <tag>å­¦ä¹ è®°å½•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æŠ˜è…¾æ—¥è®° - openwrt å®‰è£… docker æ’ä»¶</title>
    <link href="/2023/08/20/%E6%8A%98%E8%85%BE%E6%97%A5%E8%AE%B0-openwrt%E5%AE%89%E8%A3%85docker%E6%8F%92%E4%BB%B6/"/>
    <url>/2023/08/20/%E6%8A%98%E8%85%BE%E6%97%A5%E8%AE%B0-openwrt%E5%AE%89%E8%A3%85docker%E6%8F%92%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å¼€å¤´"><a href="#å†™åœ¨å¼€å¤´" class="headerlink" title="å†™åœ¨å¼€å¤´"></a>å†™åœ¨å¼€å¤´</h2><blockquote><p>æäº†ä¸ª <code>openWrt</code> è™šæ‹Ÿæœºï¼Œæƒ³åœ¨é‡Œé¢è·‘äº›ä¸œè¥¿ï¼Œå·²ç»å®‰è£…äº† <code>Docker</code>ï¼Œä½†æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¸æ–¹ä¾¿ç”¨ï¼Œæ‰€ä»¥å°±å¼€å§‹æŠ˜è…¾äº†â€¦</p></blockquote><span id="more"></span><h2 id="ç»å†"><a href="#ç»å†" class="headerlink" title="ç»å†"></a>ç»å†</h2><p>æˆ‘è·Ÿç€<a href="https://www.bilibili.com/video/BV1xm4y1a7ke">Bç«™è§†é¢‘</a>å®‰è£…äº† <code>openWrt</code>ï¼Œç„¶åå®‰è£… <code>Docker</code>å›¾å½¢ç•Œé¢æ’ä»¶ï¼Œç½‘ä¸Šå„ç§æœæ•™ç¨‹ï¼Œçœ‹å¾—å¤´éƒ½æ™•äº†ï¼ˆæˆ‘å®åœ¨ä¸ä¼šå®‰è£…å¼€å‘è½¯ä»¶å’Œé…ç¯å¢ƒè¿™ä¸€ç±»çš„ä¸œè¥¿ï¼‰ï¼Œæˆ‘éƒ½å…¨ç¨‹é—®chatGPTï¼Œè¿˜æ˜¯å„ç§æŠ¥é”™ï¼Œè¿›è¡Œä¸ä¸‹å»ã€‚å‰å¤©æ™šä¸Šæ´—å®Œæ¾¡ï¼Œåˆš12ç‚¹ï¼Œæ„Ÿè§‰è¿˜æŒºæ—©ï¼Œæˆ‘ä¸€æƒ³ï¼Œåœ¨æ‰¾æ‰¾æ•™ç¨‹çœ‹æ€ä¹ˆæï¼Œç„¶åç­‰æˆ‘æ³¨æ„åˆ°çš„æ—¶å€™å°±åˆ°äº†ä¸¤ç‚¹ï¼Œæœ€é‡è¦çš„æ˜¯å®‰è£…ä¾èµ–è¿˜æ˜¯æŠ¥é”™ğŸ˜­ã€‚</p><h2 id="é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"><a href="#é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•" class="headerlink" title="é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•"></a>é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•</h2><ul><li>é—®é¢˜</li></ul><ol><li><code>opkg update</code>æŠ¥é”™</li><li>å®‰è£…<code>Docker</code>æ’ä»¶å¤±è´¥</li><li>è¿˜æœ‰ä¸€äº›å°é—®é¢˜ï¼Œæ¯”å¦‚æ–‡ä»¶ä¼ è¾“ï¼Œ<code>winSCP</code>æ— æ³•è¿æ¥åˆ°è™šæ‹Ÿæœºâ€¦</li></ol><ul><li><p>è§£å†³<br>  å…ˆè¯´è¯´è¿™äº›å°é—®é¢˜å§ã€‚å…¶å®è¿™äº›å°é—®é¢˜æ˜¯ä¸€ä¸ªæ¥ç€ä¸€ä¸ªçš„ï¼Œæ¯”å¦‚æˆ‘ä¸çŸ¥é“æ€ä¹ˆæŠŠä¸‹å¥½çš„å®‰è£…åŒ…æ”¾åˆ°<code>openWrt</code>è™šæ‹Ÿæœºä¸­å»ï¼Œç„¶åæˆ‘å°±å»æ‰¾è§£å†³æ–¹æ³•ï¼Œç”¨æ”¯æŒ <code>sftp</code> åè®®çš„è½¯ä»¶ä¼ ï¼Œæˆ‘ä¸‹äº†<code>winSCP</code>ï¼Œç»“æœæ­»æ´»è¿ä¸ä¸Š<code>openWrt</code>ï¼Œä½†èƒ½è¿ä¸Š<code>ubuntu</code>ï¼ŒæŠŠæŠ¥é”™å†…å®¹å‘Šè¯‰chatGPTï¼Œä¹Ÿæ²¡å¾—åˆ°ä»€ä¹ˆå¯è¡Œçš„æ–¹æ³•ã€‚å¥½å¤šæ¬¡éƒ½æ˜¯é‡åˆ°è¿™æ ·çš„å°é—®é¢˜ï¼Œè€Œä¸”ä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚åæ¥æˆ‘å‘ç°ï¼Œåœ¨å›¾å½¢ç•Œé¢ä¸­çš„ç³»ç»Ÿèœå•ä¸‹æœ‰ä¸ªä¸Šä¼ æ–‡ä»¶çš„åŠŸèƒ½ï¼Œå¤ªè ¢äº†â€¦â€¦<br>  ç„¶åï¼Œç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜ä¸è§£å†³ï¼Œåé¢ä¸€ç›´è¿›è¡Œä¸ä¸‹å»ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ç›´å¡åœ¨è¿™é‡Œï¼Œç„¶åæˆ‘çœ‹åˆ°è¯´æ˜¯é•œåƒæºçš„é—®é¢˜ï¼Œé‚£äº›æºä»“åº“çš„é“¾æ¥å¤åˆ¶åˆ°æµè§ˆå™¨å·²ç»æ‰“ä¸å¼€äº†ï¼Œæ‰€ä»¥å¾—æ¢æºã€‚ç„¶ååˆåœ¨Bç«™æ‰¾åˆ°ä¸ª<a href="https://www.bilibili.com/video/av970595502">è§†é¢‘</a>ï¼Œæˆ‘ä¸ºä»€ä¹ˆæ²¡æœ‰æ—©ä¸€ç‚¹å‘ç°å•ŠğŸ˜­ï¼Œè¿™ä¸ªæ‰‹æŠŠæ‰‹æ•™ä¼šäº†æˆ‘æ¢æºï¼Œä¸‹è½½<code>Docker</code>æ’ä»¶ï¼Œå®‰è£…æ’ä»¶ï¼Œæœ€åå°±è§£å†³äº†æ‰€æœ‰é—®é¢˜ã€‚</p></li><li><p>ä»¥ä¸‹æ˜¯è¿™äº›ä¾èµ–å’Œæ’ä»¶ï¼Œæ‰“åŒ…æ”¾åœ¨è¿™é‡Œäº†ï¼š<br><a href="https://wwnf.lanzouw.com/b03epekzc">https://wwnf.lanzouw.com/b03epekzc</a><br>å¯†ç :9xv7</p></li></ul><p>å¤§æ¦‚å°±è¿™äº›äº†ï¼Œä¹Ÿæ²¡åˆ«çš„ï¼Œåæ§½ä¸€ä¸‹è‡ªå·±æœ‰å¤šè ¢å°±æ˜¯äº†ã€‚</p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><blockquote><p>å”‰ï¼Œæˆ‘åªæ˜¯ä¸ºäº†è–…å¾®è½¯ç¾Šæ¯›æ‰€ä»¥ç”¨ <code>openWrt</code>æ¥åˆ·ä¸œè¥¿ï¼ŒæŠ˜è…¾äº†è¿™ä¹ˆä¹…ï¼ŒçœŸä¸å®¹æ˜“ğŸ˜µ</p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>æŠ˜è…¾</tag>
      
      <tag>openWrt</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ginå­¦ä¹ è®°å½•-bindå‚æ•°ç»‘å®š</title>
    <link href="/2023/08/16/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-bind%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A/"/>
    <url>/2023/08/16/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-bind%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="4-bind-ç»‘å®šå‚æ•°"><a href="#4-bind-ç»‘å®šå‚æ•°" class="headerlink" title="4. bind ç»‘å®šå‚æ•°"></a>4. bind ç»‘å®šå‚æ•°</h1><p>gin ä¸­çš„ bind å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†å‰ç«¯ä¼ é€’æ¥çš„æ•°æ®ä¸ç»“æ„ä½“è¿›è¡Œå‚æ•°ç»‘å®šï¼Œä»¥åŠå‚æ•°æ ¡éªŒ ã€‚</p><span id="more"></span><h2 id="4-1-å‚æ•°ç»‘å®š"><a href="#4-1-å‚æ•°ç»‘å®š" class="headerlink" title="4.1 å‚æ•°ç»‘å®š"></a>4.1 å‚æ•°ç»‘å®š</h2><p>åœ¨ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œéœ€è¦ç»™ç»“æ„ä½“åŠ ä¸Š<code>Tag ï¼šjsonï¼Œformï¼Œurl  </code></p><p>ä¸¤ç§ç»‘å®šæ–¹å¼ï¼š  </p><ul><li>MustBind å®é™…å¼€å‘ä¸ç”¨ï¼Œæ ¡éªŒå¤±è´¥ä¼šæ”¹çŠ¶æ€ç   </li><li>ShouldBind å¯ä»¥ç»‘å®š<code>json, query, param, yaml, xml</code>ï¼Œå¦‚æœæ ¡éªŒä¸é€šè¿‡ä¼šè¿”å›é”™è¯¯</li></ul><h3 id="ç»‘å®špostå‚æ•°-ShouldBindJSON"><a href="#ç»‘å®špostå‚æ•°-ShouldBindJSON" class="headerlink" title="ç»‘å®špostå‚æ•° ShouldBindJSON"></a>ç»‘å®špostå‚æ•° ShouldBindJSON</h3><p>tag ä¸º : <code>json  </code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> UserInfo <span class="hljs-keyword">struct</span> &#123;  <br>    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot;`</span>  <br>    Age <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;age&quot;`</span>  <br>    Gender <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;gender&quot;`</span>  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>    router := gin.Default()  <br><br>    <span class="hljs-comment">// ç»‘å®špostå‚æ•°  </span><br>    <span class="hljs-comment">/* å‘é€åˆ°æ•°æ®ï¼š  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">        &quot;name&quot;: &quot;aaa&quot;,  </span><br><span class="hljs-comment">        &quot;age&quot;: 33,  </span><br><span class="hljs-comment">        &quot;gender&quot;: &quot;male&quot;  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment">    */</span>  <br>    router.POST(<span class="hljs-string">&quot;/bind-post&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;  <br>        <span class="hljs-keyword">var</span> userInfo UserInfo  <br><br>        <span class="hljs-comment">// å°†è¯·æ±‚ä¸­ä½“jsonæ•°æ®ç»‘å®šåˆ°userInfo ä¸Š  </span><br>        err := arg.ShouldBindJSON(&amp;userInfo)  <br><br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>            arg.JSON(<span class="hljs-number">400</span>, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šå¤±è´¥&quot;</span>&#125;)  <br>            fmt.Println(err)  <br>            <span class="hljs-keyword">return</span>  <br>        &#125;  <br>        arg.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: userInfo, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šæˆåŠŸ&quot;</span>&#125;)  <br>    &#125;)  <br>    <span class="hljs-comment">/* è¿”å›ç»“æœï¼š  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">    &quot;data&quot;: &#123;  </span><br><span class="hljs-comment">            &quot;name&quot;: &quot;aaa&quot;,  </span><br><span class="hljs-comment">            &quot;age&quot;: 33,  </span><br><span class="hljs-comment">            &quot;gender&quot;: &quot;male&quot;  </span><br><span class="hljs-comment">        &#125;,  </span><br><span class="hljs-comment">        &quot;msg&quot;: &quot;ç»‘å®šæˆåŠŸ&quot;  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment">    */</span>  <br><br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-keyword">return</span>  <br>    &#125;  <br>&#125;  <br></code></pre></td></tr></table></figure><h2 id="4-2-ç»‘å®šqueryå‚æ•°-ShouldBindQuery"><a href="#4-2-ç»‘å®šqueryå‚æ•°-ShouldBindQuery" class="headerlink" title="4.2 ç»‘å®šqueryå‚æ•° ShouldBindQuery"></a>4.2 ç»‘å®šqueryå‚æ•° ShouldBindQuery</h2><p>tag ä¸º : <code>form </code></p><p>formæ˜¯ç”¨æ¥ç»‘å®š POST è¯·æ±‚ä½“ä¸­çš„æŸ¥è¯¢å‚æ•°ï¼Œè¿™é‡Œä¸èƒ½ç”¨queryï¼Œqueryæ˜¯ç”¨æ¥ç»‘å®š GET è¯·æ±‚ä¸­çš„æŸ¥è¯¢å‚æ•°  </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> UserInfo <span class="hljs-keyword">struct</span> &#123;  <br>    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot; form:&quot;name&quot;`</span>  <br>    Age <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;age&quot; form:&quot;age&quot;`</span>  <br>    Gender <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;gender&quot; form:&quot;gender&quot;`</span>  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>    router := gin.Default()  <br><br>    <span class="hljs-comment">// ç»‘å®šqueryå‚æ•°  </span><br>    <span class="hljs-comment">// è¾“å…¥çš„è¯·æ±‚ä¸ºï¼š http://127.0.0.1/bind-query?name=kjasn&amp;age=54&amp;gender=male  </span><br>    router.POST(<span class="hljs-string">&quot;/bind-query&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;  <br>        <span class="hljs-keyword">var</span> userInfo UserInfo  <br><br>        <span class="hljs-comment">// å°†è¯·æ±‚ä¸­çš„jsonæ•°æ®ç»‘å®šåˆ°userInfo ä¸Š  </span><br>        err := arg.ShouldBindQuery(&amp;userInfo)  <br><br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>            arg.JSON(<span class="hljs-number">400</span>, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šå¤±è´¥&quot;</span>&#125;)  <br>            fmt.Println(err)  <br>            <span class="hljs-keyword">return</span>  <br>        &#125;  <br>        arg.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;bind-query&quot;</span>, <span class="hljs-string">&quot;data&quot;</span>: userInfo, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šæˆåŠŸ&quot;</span>&#125;)  <br>    &#125;)  <br>    <span class="hljs-comment">/* ç»“æœå¦‚ä¸‹ï¼š  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">        &quot;data&quot;: &#123;  </span><br><span class="hljs-comment">            &quot;name&quot;: &quot;kjasn&quot;,  </span><br><span class="hljs-comment">            &quot;age&quot;: 54,  </span><br><span class="hljs-comment">            &quot;gender&quot;: &quot;male&quot;  </span><br><span class="hljs-comment">        &#125;,  </span><br><span class="hljs-comment">        &quot;msg&quot;: &quot;ç»‘å®šæˆåŠŸ&quot;,  </span><br><span class="hljs-comment">        &quot;type&quot;: &quot;bind-query&quot;  </span><br><span class="hljs-comment">    &#125; */</span><br><br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-keyword">return</span>  <br>    &#125;  <br>&#125;  <br>  <br></code></pre></td></tr></table></figure><h2 id="4-3-ç»‘å®šåŠ¨æ€å‚æ•°-ShouldBindUri"><a href="#4-3-ç»‘å®šåŠ¨æ€å‚æ•°-ShouldBindUri" class="headerlink" title="4.3 ç»‘å®šåŠ¨æ€å‚æ•° ShouldBindUri"></a>4.3 ç»‘å®šåŠ¨æ€å‚æ•° ShouldBindUri</h2><p>tag ä¸º : <code>uri  </code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> UserInfo <span class="hljs-keyword">struct</span> &#123;  <br>    <span class="hljs-comment">// åé¢åŠ çš„æ˜¯tag uriæ˜¯ç”¨æ¥ç»‘å®šPOST è¯·æ±‚ä¸­çš„urlçš„å‚æ•°  </span><br>    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot; form:&quot;name&quot; uri:&quot;name&quot; `</span>  <br>    Age <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;age&quot; form:&quot;age&quot; uri:&quot;age&quot;`</span>  <br>    Gender <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;gender&quot; form:&quot;gender&quot; uri:&quot;gender&quot;`</span>  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>router := gin.Default()  <br>  <br><span class="hljs-comment">// ç»‘å®šåŠ¨æ€å‚æ•° ä»urlä¸­è·å–å‚æ•°  </span><br><span class="hljs-comment">// è¾“å…¥çš„è¯·æ±‚ä¸ºï¼šhttp://127.0.0.1/bind-uri/qqq/12/female  </span><br>router.POST(<span class="hljs-string">&quot;/bind-uri/:name/:age/:gender&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;  <br>    <span class="hljs-keyword">var</span> userInfo UserInfo  <br><br>    <span class="hljs-comment">// å°†è¯·æ±‚ä¸­çš„urlçš„æ•°æ®ç»‘å®šåˆ°userInfo ä¸Š  </span><br>    err := arg.ShouldBindUri(&amp;userInfo)  <br><br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        arg.JSON(<span class="hljs-number">400</span>, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šå¤±è´¥&quot;</span>&#125;)  <br>        fmt.Println(err)  <br>            <span class="hljs-keyword">return</span>  <br>        &#125;  <br>        arg.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: userInfo, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šæˆåŠŸ&quot;</span>&#125;)  <br>    &#125;)  <br>    <span class="hljs-comment">/*  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">        &quot;data&quot;: &#123;  </span><br><span class="hljs-comment">            &quot;name&quot;: &quot;qqq&quot;,  </span><br><span class="hljs-comment">            &quot;age&quot;: 12,  </span><br><span class="hljs-comment">            &quot;gender&quot;: &quot;female&quot;  </span><br><span class="hljs-comment">        &#125;,  </span><br><span class="hljs-comment">        &quot;msg&quot;: &quot;ç»‘å®šæˆåŠŸ&quot;  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment">    */</span>  <br><br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-keyword">return</span>  <br>    &#125;  <br>&#125;  <br>  <br></code></pre></td></tr></table></figure><h2 id="4-4-ShouldBind"><a href="#4-4-ShouldBind" class="headerlink" title="4.4 ShouldBind"></a>4.4 ShouldBind</h2><p><strong>ä¼šæ ¹æ®è¯·æ±‚å¤´ä¸­çš„ content-type å»è‡ªåŠ¨ç»‘å®š</strong><br>é»˜è®¤tag ä¸º <code>form  </code></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go">router.POST(<span class="hljs-string">&quot;/bind-form&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;  <br>    <span class="hljs-keyword">var</span> userInfo UserInfo  <br><br>    <span class="hljs-comment">// è¯·æ±‚1ï¼š http://127.0.0.1/bind-form?name=lkh&amp;age=77&amp;gender=secret ï¼ˆè™½ç„¶æ˜¯post,ä½†ä¹Ÿèƒ½ç»‘å®šgetè¯·æ±‚ï¼‰  </span><br>    <span class="hljs-comment">/* è¯·æ±‚2ï¼š (jsonæ ¼å¼) ä¹Ÿå¯ä»¥è¯·æ±‚form-dataç­‰ç±»å‹  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">        &quot;name&quot;: &quot;aaa&quot;,  </span><br><span class="hljs-comment">        &quot;age&quot;: 33,  </span><br><span class="hljs-comment">        &quot;gender&quot;: &quot;ç”·&quot;  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment">    */</span>  <br><br>    err := arg.ShouldBind(&amp;userInfo)  <br><br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        arg.JSON(<span class="hljs-number">400</span>, gin.H&#123;<span class="hljs-string">&quot;error&quot;</span>: err, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šå¤±è´¥&quot;</span>&#125;)  <br>        fmt.Println(err)  <br>            <span class="hljs-keyword">return</span>  <br>    &#125;  <br>    arg.JSON(<span class="hljs-number">200</span>, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: userInfo, <span class="hljs-string">&quot;msg&quot;</span>: <span class="hljs-string">&quot;ç»‘å®šæˆåŠŸ&quot;</span>&#125;)  <br>    <span class="hljs-comment">/*  </span><br><span class="hljs-comment">    // è¯·æ±‚1çš„ç»“æœ  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">        &quot;data&quot;: &#123;  </span><br><span class="hljs-comment">            &quot;name&quot;: &quot;lkh&quot;,  </span><br><span class="hljs-comment">            &quot;age&quot;: 77,  </span><br><span class="hljs-comment">            &quot;gender&quot;: &quot;secret&quot;  </span><br><span class="hljs-comment">        &#125;,  </span><br><span class="hljs-comment">        &quot;msg&quot;: &quot;ç»‘å®šæˆåŠŸ&quot;,  </span><br><span class="hljs-comment">        &quot;type&quot;: &quot;&quot; // getè¯·æ±‚æ²¡æœ‰çš„è¯·æ±‚ä½“ Content-Typeå­—æ®µ  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    // è¯·æ±‚2çš„ç»“æœ  </span><br><span class="hljs-comment">    &#123;  </span><br><span class="hljs-comment">    &quot;data&quot;: &#123;  </span><br><span class="hljs-comment">            &quot;name&quot;: &quot;aaa&quot;,  </span><br><span class="hljs-comment">            &quot;age&quot;: 33,  </span><br><span class="hljs-comment">            &quot;gender&quot;: &quot;ç”·&quot;  </span><br><span class="hljs-comment">        &#125;,  </span><br><span class="hljs-comment">        &quot;msg&quot;: &quot;ç»‘å®šæˆåŠŸ&quot;,  </span><br><span class="hljs-comment">        &quot;type&quot;: &quot;application/json&quot; // ç±»å‹  </span><br><span class="hljs-comment">    &#125;  </span><br><span class="hljs-comment">    */</span>  <br>&#125;)  <br>  <br></code></pre></td></tr></table></figure><h2 id="4-5-bind-ç»‘å®šå™¨"><a href="#4-5-bind-ç»‘å®šå™¨" class="headerlink" title="4.5 bind ç»‘å®šå™¨"></a>4.5 bind ç»‘å®šå™¨</h2><p>éœ€è¦ä½¿ç”¨å‚æ•°éªŒè¯åŠŸèƒ½ï¼Œéœ€è¦åŠ  binding tag  </p><h3 id="å¸¸ç”¨éªŒè¯å™¨"><a href="#å¸¸ç”¨éªŒè¯å™¨" class="headerlink" title="å¸¸ç”¨éªŒè¯å™¨"></a>å¸¸ç”¨éªŒè¯å™¨</h3><p>éªŒè¯å™¨å’Œå€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼ï¼ï¼,åŒä¸€ä¸ªå­—æ®µå¤šä¸ªéªŒè¯è§„åˆ™ç”¨â€™,â€™éš”å¼€<br><code>eg: binding:&quot;min = 5&quot; // error!!! </code>  </p><ul><li><p>ä¸èƒ½ä¸ºç©ºï¼Œå¹¶ä¸”ä¸èƒ½æ²¡æœ‰è¿™ä¸ªå­—æ®µ<br>required: å¿…å¡«å­—æ®µ,å¦‚: <code>binding:&quot;required&quot;</code>  </p></li><li><p>é’ˆå¯¹å­—ç¬¦ä¸²çš„é•¿åº¦<br>min æœ€å°é•¿åº¦ï¼Œå¦‚ï¼š<code>binding:&quot;min=5&quot;</code><br>max æœ€å¤§é•¿åº¦ï¼Œå¦‚ï¼š<code>binding:&quot;max=10&quot;</code><br>len é•¿åº¦ï¼Œå¦‚ï¼š<code>binding:&quot;len=6&quot;</code>  </p></li><li><p>é’ˆå¯¹æ•°å­—çš„å¤§å°<br>eq ç­‰äºï¼Œå¦‚ï¼š<code>binding:&quot;eq=3&quot;</code><br>ne ä¸ç­‰äºï¼Œå¦‚ï¼š<code>binding:&quot;ne=12&quot;</code><br>gt å¤§äº,å¦‚: <code>binding:&quot;gt=10&quot;</code><br>gte å¤§äºç­‰äº,å¦‚:<code> binding:&quot;gte=10&quot;</code><br>lt å°äºï¼Œå¦‚ï¼š<code>binding:&quot;lt=10&quot;</code><br>lte å°äºç­‰äºï¼Œå¦‚ï¼š<code>binding:&quot;lte=10&quot;</code><br>eqfield ç­‰äºå…¶ä»–å­—æ®µçš„å€¼ï¼Œå¦‚ï¼š<code>binding:&quot;eqfield=ConfirmPassword&quot;</code><br>nefield ä¸ç­‰äºå…¶ä»–å­—æ®µçš„å€¼<br>å¿½ç•¥å­—æ®µï¼Œå¦‚ï¼š<code>binding:&quot;-&quot;</code></p></li></ul><h3 id="gin-å†…ç½®éªŒè¯å™¨"><a href="#gin-å†…ç½®éªŒè¯å™¨" class="headerlink" title="gin å†…ç½®éªŒè¯å™¨"></a>gin å†…ç½®éªŒè¯å™¨</h3><h4 id="æšä¸¾éªŒè¯å™¨-oneof"><a href="#æšä¸¾éªŒè¯å™¨-oneof" class="headerlink" title="æšä¸¾éªŒè¯å™¨ oneof"></a>æšä¸¾éªŒè¯å™¨ oneof</h4><p>è¦æ±‚å½“å‰å­—æ®µçš„å€¼å¿…é¡»æ˜¯ oneof ä¸­çš„ä¸€ä¸ªï¼Œoneofçš„å€¼ç”¨ç©ºæ ¼éš”å¼€ï¼Œå¸¸ç”¨ä¸æ€§åˆ«æ£€éªŒ  </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// ä»¥ä¸‹æ˜¯ç»“æ„ä½“ä¸­çš„ä¸€ä¸ªå­—æ®µ  </span><br>Gender <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;gender&quot; binding:&quot;oneof=ç”· å¥³&quot;`</span> <span class="hljs-comment">// æ€§åˆ«  </span><br></code></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²ç›¸å…³"><a href="#å­—ç¬¦ä¸²ç›¸å…³" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³"></a>å­—ç¬¦ä¸²ç›¸å…³</h4><p>contains&#x3D;arg åŒ…å«argçš„å­—ç¬¦<br>excludes&#x3D;arg ä¸åŒ…å«arg<br>startswith&#x3D;arg ä»¥argå¼€å¤´<br>endswith&#x3D;arg ä»¥argç»“å°¾<br>dive ç”¨æ¥å¯¹æ•°ç»„æˆ–åˆ‡ç‰‡ä¸­çš„æ¯ä¸ªå…ƒç´ è¿›è¡Œå•ç‹¬çš„éªŒè¯  </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// nameå­—æ®µ  </span><br>Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot; binding:&quot;required,endswith=f&quot;`</span> <span class="hljs-comment">// ç”¨æˆ·å  </span><br>  <br><span class="hljs-comment">// 1. éªŒè¯åˆ‡ç‰‡ä¸­çš„å…ƒç´ ä¸èƒ½ä¸ºç©ºï¼š  </span><br>Data []<span class="hljs-type">string</span> <span class="hljs-string">`binding:&quot;dive,required&quot;`</span>  <br>  <br><span class="hljs-comment">// 2. éªŒè¯åˆ‡ç‰‡ä¸­çš„å…ƒç´ çš„é•¿åº¦ä¸èƒ½è¶…è¿‡10ï¼š  </span><br>Data []<span class="hljs-type">string</span> <span class="hljs-string">`binding:&quot;dive,max=10&quot;`</span>  <br>  <br><span class="hljs-comment">// 3. éªŒè¯åˆ‡ç‰‡ä¸­çš„å…ƒç´ å¿…é¡»ä¸ºæ•°å­—ï¼š  </span><br>Data []<span class="hljs-type">string</span> <span class="hljs-string">`binding:&quot;dive,number&quot;`</span>  <br></code></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰éªŒè¯å™¨"><a href="#è‡ªå®šä¹‰éªŒè¯å™¨" class="headerlink" title="è‡ªå®šä¹‰éªŒè¯å™¨"></a>è‡ªå®šä¹‰éªŒè¯å™¨</h3><p>å†…ç½®çš„éªŒè¯å™¨å¾€å¾€ä¸å¤Ÿç”¨ï¼Œéœ€è¦è‡ªå®šä¹‰éªŒè¯å™¨ï¼Œå¦‚ä¸‹è‡ªå®šä¹‰ä¸€ä¸ªæ ¡éªŒå§“åæ˜¯å¦é‡å¤çš„éªŒè¯å™¨  </p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main  <br>  <br><span class="hljs-keyword">import</span> (  <br>    <span class="hljs-string">&quot;fmt&quot;</span>  <br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span>  <br>    <span class="hljs-string">&quot;github.com/gin-gonic/gin/binding&quot;</span>  <br>    <span class="hljs-string">&quot;github.com/go-playground/validator/v10&quot;</span>  <br>    <span class="hljs-string">&quot;net/http&quot;</span>  <br>    <span class="hljs-string">&quot;reflect&quot;</span>  <br>)  <br>  <br><span class="hljs-keyword">type</span> SignUserInfo <span class="hljs-keyword">struct</span> &#123;  <br>    <span class="hljs-comment">// æ·»åŠ éªŒè¯å™¨ å¸¸ç”¨çš„ æ­¤å¤„ uniqueNameæ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„éªŒè¯å™¨  </span><br>    Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot; binding:&quot;required,uniqueName&quot; msg:&quot;æ˜µç§°ä¸èƒ½ä¸ºç©ºä¹Ÿä¸èƒ½é‡å¤&quot;`</span> <span class="hljs-comment">// ç”¨æˆ·å  </span><br>    Age <span class="hljs-type">int</span> <span class="hljs-string">`json:&quot;age&quot; binding:&quot;lt=100,gt=0&quot; msg:&quot;å¹´é¾„ä¸ç¬¦åˆè¦æ±‚&quot;`</span> <span class="hljs-comment">// å¹´é¾„  </span><br>&#125;  <br>  <br><span class="hljs-comment">// ç®€å•å†™ï¼Œç›´æ¥ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ å®é™…å¼€å‘éœ€è¦å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æ•°æ®åº“ç„¶ååˆ°æ•°æ®åº“ä¸­æŸ¥æ‰¾æ˜µç§°æ˜¯å¦é‡å¤  </span><br><span class="hljs-keyword">var</span> nameList = []<span class="hljs-type">string</span>&#123;<span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>, <span class="hljs-string">&quot;æå››&quot;</span>, <span class="hljs-string">&quot;ç‹äº”&quot;</span>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">GetValidMsg</span><span class="hljs-params">(err <span class="hljs-type">error</span>, user SignUserInfo)</span></span> <span class="hljs-type">string</span> &#123;  <br>    <span class="hljs-comment">// å°†erræ¥å£æ–­è¨€ä¸ºå…·ä½“ç±»å‹  </span><br>    <span class="hljs-keyword">if</span> errs, ok := err.(validator.ValidationErrors); ok &#123;  <br>        getObj := reflect.TypeOf(&amp;user)  <br>        fmt.Println(<span class="hljs-string">&quot;ç±»å‹ä¸ºï¼š&quot;</span>, getObj)  <br><br>        <span class="hljs-comment">// æ–­è¨€æˆåŠŸ  </span><br>        <span class="hljs-keyword">for</span> _, e := <span class="hljs-keyword">range</span> errs &#123; <span class="hljs-comment">// éå†æ¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ æŠ¥é”™ä¿¡æ¯å¯èƒ½æœ‰å¤šä¸ª  </span><br>            <span class="hljs-comment">// æ ¹æ®æŠ¥é”™å­—æ®µåï¼Œè·å–ç»“æ„ä½“çš„å…·ä½“å­—æ®µ  </span><br>            <span class="hljs-keyword">if</span> f, exits := getObj.Elem().FieldByName(e.Field()); exits &#123;  <br>                msg := f.Tag.Get(<span class="hljs-string">&quot;msg&quot;</span>)  <br>                fmt.Println(msg)  <br>                    <span class="hljs-keyword">return</span> msg  <br>                &#125;  <br>            &#125;  <br>        &#125;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span> <span class="hljs-comment">// æ²¡æœ‰æ£€æŸ¥åˆ°éªŒè¯å™¨é”™è¯¯åˆ™è¿”å›ç©º  </span><br>&#125;  <br>  <br><span class="hljs-comment">// å‡½æ•°åŸå‹ä¸º func(fl FieldLevel) bool  </span><br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">nameCheck</span><span class="hljs-params">(fl validator.FieldLevel)</span></span> <span class="hljs-type">bool</span> &#123;  <br>    <span class="hljs-comment">// éå†ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ å®é™…åº”åˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æ¨¡æ‹Ÿ  </span><br>    <span class="hljs-keyword">for</span> _, nameStr := <span class="hljs-keyword">range</span> nameList &#123;  <br>        <span class="hljs-comment">// æ–­è¨€  </span><br>        name := fl.Field().Interface().(<span class="hljs-type">string</span>)  <br><br>        <span class="hljs-keyword">if</span> nameStr == name &#123;  <br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>  <br>        &#125;  <br>    &#125;  <br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>  <br>&#125;  <br>  <br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;  <br>    router := gin.Default()  <br><br>    <span class="hljs-keyword">if</span> v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123;  <br>        <span class="hljs-comment">// æ³¨å†ŒuniqueNameéªŒè¯å™¨ï¼Œå…¶è‡ªå®šä¹‰éªŒè¯åŠŸèƒ½é€šè¿‡_nameCheckå‡½æ•°æ¥å®ç°  </span><br>        err := v.RegisterValidation(<span class="hljs-string">&quot;uniqueName&quot;</span>, _nameCheck)  <br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>            <span class="hljs-keyword">return</span>  <br>        &#125;  <br>    &#125;  <br>  <br>    router.POST(<span class="hljs-string">&quot;/custom-check&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;  <br>        fmt.Println(<span class="hljs-string">&quot;è®¿é—®...&quot;</span>)  <br>        <span class="hljs-keyword">var</span> user SignUserInfo  <br>        err := c.ShouldBindJSON(&amp;user) <span class="hljs-comment">// è¿”å›errorä¿¡æ¯ï¼Œä¸æŠ¥é”™åˆ™è¿”å›ç©º  </span><br>        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>            customErr := _GetValidMsg(err, user)  <br>            c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: customErr&#125;)  <br>            <span class="hljs-keyword">return</span>  <br>        &#125;  <br><br>        c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: user&#125;)  <br>    &#125;)  <br><br>    err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)  <br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;  <br>        <span class="hljs-keyword">return</span>  <br>    &#125;  <br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>gin</tag>
      
      <tag>å­¦ä¹ è®°å½•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>cpp-re</title>
    <link href="/2023/08/07/cpp-re/"/>
    <url>/2023/08/07/cpp-re/</url>
    
    <content type="html"><![CDATA[<hr><p>è¿™é‡Œä¸è®¸çœ‹ï¼ğŸ˜¡</p><span id="more"></span><h2 id="2-å¼•ç”¨"><a href="#2-å¼•ç”¨" class="headerlink" title="2. å¼•ç”¨"></a>2. å¼•ç”¨</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ä½œç”¨ï¼šç»™å˜é‡èµ·åˆ«å    è¯­æ³•: æ•°æ®ç±»å‹ &amp;åˆ«å = åŸå   å¼•ç”¨å°±åƒæŒ‡é’ˆä¸€æ ·ï¼Œèµ‹å€¼æ—¶ä¸ä¼šå†å¤åˆ¶ä¸€ä»½å€¼ï¼Œè€Œæ˜¯ç›´æ¥kao&#x27;bei</span><br><span class="hljs-comment">//eg: int a=10;  int &amp;num = a; å¼•ç”¨çš„æ•°æ®ç±»å‹è¦ä¸åŸæ•°æ®ç±»å‹ä¸€æ ·  </span><br><br><span class="hljs-type">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span>&amp; p1 = a;<br><br>cout &lt;&lt; <span class="hljs-string">&quot;a= &quot;</span> &lt;&lt; a &lt;&lt; endl; <span class="hljs-comment">//10</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p1= &quot;</span> &lt;&lt; p1 &lt;&lt; endl; <span class="hljs-comment">//10</span><br><br>p1 = <span class="hljs-number">20</span>;<span class="hljs-comment">//é€šè¿‡å¼•ç”¨ä¿®æ”¹å˜é‡çš„å€¼</span><br><span class="hljs-comment">//è¾“å‡ºç»“æœ aå’Œp1çš„å€¼ä¸€æ · </span><br>cout &lt;&lt; <span class="hljs-string">&quot;a= &quot;</span> &lt;&lt; a &lt;&lt; endl; <span class="hljs-comment">//20</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p1= &quot;</span> &lt;&lt; p1 &lt;&lt; endl; <span class="hljs-comment">//20</span><br><br><span class="hljs-comment">//åœ°å€ç›¸åŒ</span><br>cout &lt;&lt; (<span class="hljs-type">int</span>)&amp;a &lt;&lt; endl;<br>cout &lt;&lt; (<span class="hljs-type">int</span>)&amp;p1 &lt;&lt; endl;<br><span class="hljs-comment">//è¯´æ˜ aä¸p1 æ˜¯åŒä¸€ä¸ªå˜é‡ï¼Œåœ°å€ç›¸åŒï¼ˆæŒ‡å‘åŒä¸€å—å†…å­˜ï¼‰ï¼Œå€¼ç›¸åŒï¼Œå¯¹å…¶ä¸­ä»»æ„ä¸€ä¸ªè¿›è¡Œæ“ä½œéƒ½ä¼šç›¸åº”çš„å½±å“å¦ä¸€ä¸ª</span><br><br><span class="hljs-comment">//æ³¨æ„ï¼š </span><br><span class="hljs-comment">//1.å¼•ç”¨å¿…é¡»è¦åˆå§‹åŒ–ï¼ï¼ï¼</span><br>    <span class="hljs-comment">//2.å¼•ç”¨åˆå§‹åŒ–åæ— æ³•æ”¹å˜</span><br>    <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>,b=<span class="hljs-number">20</span>;<br>    <span class="hljs-comment">//int&amp; c;  //err æœªåˆå§‹åŒ–</span><br>    <span class="hljs-type">int</span>&amp; c=a;<span class="hljs-comment">//åˆå§‹åŒ–</span><br>    c=b; <span class="hljs-comment">//è¿™åªæ˜¯èµ‹å€¼è€Œä¸æ˜¯æ”¹å˜å¼•ç”¨</span><br>    <br>    <br><span class="hljs-comment">/////////////////////////////////////////////</span><br><span class="hljs-comment">//ç”¨å¼•ç”¨ä½œä¸ºå‡½æ•°å®å‚</span><br><br><span class="hljs-comment">//äº¤æ¢ä¸¤æ•°å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">myswap</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp;a,<span class="hljs-type">int</span>&amp;b)</span><span class="hljs-comment">//ç›¸å½“äºå°†å½¢å‚ä½œä¸ºä¼ é€’çš„å®å‚çš„å¼•ç”¨ï¼Œå› æ­¤é€šè¿‡æ“ä½œå½¢å‚å¯ä»¥ä¿®æ”¹å®å‚</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> tmp=a;a=b;b=tmp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> x=<span class="hljs-number">1</span>,y=<span class="hljs-number">2</span>;<br><span class="hljs-built_in">myswap</span>(x,y);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">/////////////////////////////////////////////////</span><br><span class="hljs-comment">//ç”¨å¼•ç”¨ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼</span><br><span class="hljs-comment">//1ã€ä¸è¦è¿”å›å±€éƒ¨å˜é‡çš„å¼•ç”¨,å› ä¸ºå‡½æ•°ç»“æŸå˜é‡å°±é”€æ¯äº†</span><br><span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">test01</span><span class="hljs-params">()</span> <span class="hljs-comment">//è¿”å›å˜é‡açš„å¼•ç”¨</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//int a = 10://å±€éƒ¨å˜é‡å­˜æ”¾åœ¨æ ˆåŒº</span><br><span class="hljs-comment">//return a;</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> b=<span class="hljs-number">10</span>;<span class="hljs-comment">//é™æ€å˜é‡åœ¨å †åŒº</span><br><span class="hljs-keyword">return</span> b;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span>&amp; ret=<span class="hljs-built_in">test01</span>();<br>cout&lt;&lt;<span class="hljs-string">&quot;ret=&quot;</span>&lt;&lt;ret&lt;&lt;endl;<span class="hljs-comment">//10</span><br><br><span class="hljs-comment">//2.å¼•ç”¨ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼æ—¶ï¼Œå‡½æ•°è°ƒç”¨ä¹Ÿå¯ä½œä¸ºå·¦å€¼</span><br><span class="hljs-built_in">test01</span>()=<span class="hljs-number">20</span>; <span class="hljs-comment">//test01()è¿”å›çš„æ˜¯å˜é‡çš„å¼•ç”¨ï¼Œç„¶åå¯¹å…¶è¿›è¡Œèµ‹å€¼æ“ä½œå°±ç›¸å½“äºå¯¹æ¥å—è¯¥å¼•ç”¨çš„retè¿›è¡Œèµ‹å€¼æ“ä½œ</span><br>cout&lt;&lt;<span class="hljs-string">&quot;ret=&quot;</span>&lt;&lt;ret&lt;&lt;endl;<span class="hljs-comment">//20</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">///////////////////////////////////////</span><br><span class="hljs-comment">//3.å¼•ç”¨çš„æœ¬è´¨--- åˆ›å»ºå¼•ç”¨æ—¶å°±æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œä½¿ç”¨å¼•ç”¨æ—¶å°±æ˜¯è§£å¼•ç”¨æ“ä½œ  è¿™äº›éƒ½ç”±ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆ</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; a)</span></span><br><span class="hljs-function"></span>&#123;<br>a=<span class="hljs-number">100</span>;<span class="hljs-comment">//è‡ªåŠ¨è½¬æ¢ä¸º *a=100 ;</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n=<span class="hljs-number">10</span>;<br><span class="hljs-type">int</span>&amp; a=n;<span class="hljs-comment">//è‡ªåŠ¨è½¬æ¢ä¸º int* const a=&amp;n; æŒ‡é’ˆå¸¸é‡çš„æŒ‡å‘ä¸å¯æ›´æ”¹ï¼ˆè¿™ä¹Ÿè¯´æ˜äº†ä¸ºä»€ä¹ˆå¼•ç”¨ä¸å¯æ›´æ”¹ï¼‰</span><br>a=<span class="hljs-number">20</span>;<span class="hljs-comment">//å‘ç°æ˜¯å¼•ç”¨çš„èµ‹å€¼æ“ä½œï¼Œè½¬æ¢ä¸º *a=20;</span><br><span class="hljs-built_in">func</span>(a);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">//////////////////////////////////////////////////////////////</span><br><span class="hljs-comment">//4.å¸¸é‡å¼•ç”¨  --- ç”¨æ¥ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œæ›´æ”¹äº†å˜é‡çš„å€¼////////////</span><br><br><span class="hljs-comment">// int&amp; b=10; err ,å¼•ç”¨å¿…é¡»å¼•ä¸€å—åˆæ³•çš„å†…å­˜ç©ºé—´</span><br><span class="hljs-comment">//åŠ ä¸Šconståï¼Œç¼–è¯‘å™¨å°†ä»£ç ä¿®æ”¹ä¸º int tmp=10;const int&amp; b=tmp;</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; b=<span class="hljs-number">10</span>;<span class="hljs-comment">//å…¶å®æ˜¯å¼•ç”¨äº†ä¸€å—æ²¡æœ‰åŸåçš„ç©ºé—´ï¼ŒåŸåç”±ç¼–è¯‘å™¨éšæœºå–ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å¼•ç”¨å¯¹è¿™å—ç©ºé—´è¿›è¡Œæ“ä½œå°±è¡Œï¼Œç”±äºæ˜¯å¸¸é‡å¼•ç”¨ä¹‹åå°±ä¸èƒ½å†æ›´æ”¹äº† å¦‚ b=20;err</span><br><br><br><br><span class="hljs-comment">//ä¿®é¥°å½¢å‚ï¼Œé˜²æ­¢è¯¯æ“ä½œæ›´æ”¹äº†å˜é‡çš„å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show1</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; val)</span></span><br><span class="hljs-function"></span>&#123;<br>val=<span class="hljs-number">2</span>;<span class="hljs-comment">//æ­¤å¤„ä¿®æ”¹äº†val,mainå‡½æ•°ä¸­çš„aä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Œå¯èƒ½å¯¼è‡´è¯¯æ“ä½œ</span><br>cout&lt;&lt;<span class="hljs-string">&quot;val= &quot;</span>&lt;&lt;val&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show2</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; val)</span><span class="hljs-comment">//ä½¿ç”¨å¸¸é‡å¼•ç”¨</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">// val=3;err æŠ¥é”™ï¼Œæç¤ºä¸èƒ½ä¿®æ”¹ï¼Œå¯é˜²æ­¢è¯¯æ“ä½œ </span><br>cout&lt;&lt;<span class="hljs-string">&quot;val= &quot;</span>&lt;&lt;val&lt;&lt;endl;<span class="hljs-comment">//2</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> a=<span class="hljs-number">1</span>;<br><span class="hljs-built_in">show1</span>(a);<span class="hljs-comment">//2,show1å‡½æ•°æ”¹å˜äº†açš„å€¼</span><br><span class="hljs-built_in">show2</span>(a);<span class="hljs-comment">//2</span><br>cout&lt;&lt;<span class="hljs-string">&quot;a= &quot;</span>&lt;&lt;a&lt;&lt;endl;<span class="hljs-comment">//2</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h2 id="3-å‡½æ•°æé«˜"><a href="#3-å‡½æ•°æé«˜" class="headerlink" title="3.å‡½æ•°æé«˜"></a>3.å‡½æ•°æé«˜</h2><h3 id="3-1-å‡½æ•°é»˜è®¤å‚æ•°"><a href="#3-1-å‡½æ•°é»˜è®¤å‚æ•°" class="headerlink" title="3.1 å‡½æ•°é»˜è®¤å‚æ•°"></a>3.1 å‡½æ•°é»˜è®¤å‚æ•°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-comment">//åœ¨C++ä¸­ï¼Œå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­çš„å½¢å‚æ˜¯å¯ä»¥æœ‰é»˜è®¤å€¼çš„ã€‚   è¯­æ³•:è¿”å›å€¼ç±»å‹ å‡½æ•°å(å‚æ•°=é»˜è®¤å€¼)&#123;&#125;</span><br><br><br><span class="hljs-comment">//1ã€å¦‚æœæŸä¸ªä½ç½®å·²ç»æœ‰äº†é»˜è®¤å‚æ•°,é‚£ä¹ˆä»è¿™ä¸ªä½ç½®å¾€å,ä»å·¦åˆ°å³éƒ½å¿…é¡»æœ‰é»˜è®¤å€¼</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b=<span class="hljs-number">2</span>,<span class="hljs-type">int</span> c=<span class="hljs-number">3</span>)</span></span>&#123;<span class="hljs-comment">//bæœ‰äº†é»˜è®¤å€¼ï¼Œå…¶åæ‰€æœ‰å½¢å‚å°±éƒ½è¦æœ‰</span><br><span class="hljs-keyword">return</span> a+b+c;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout&lt;&lt;<span class="hljs-built_in">sum</span>(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>)&lt;&lt;endl;<span class="hljs-comment">//14</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">//2ã€å£°æ˜å’Œå®ç°åªèƒ½æœ‰ä¸€ä¸ªæœ‰é»˜è®¤å‚æ•°</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum2</span><span class="hljs-params">(<span class="hljs-type">int</span> a = <span class="hljs-number">10</span>, <span class="hljs-type">int</span> b= <span class="hljs-number">10</span>)</span></span>;<span class="hljs-comment">//å£°æ˜</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout&lt;&lt;<span class="hljs-built_in">sum2</span>(<span class="hljs-number">3</span>,<span class="hljs-number">5</span>)&lt;&lt;endl;<span class="hljs-comment">//8</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum2</span><span class="hljs-params">(<span class="hljs-type">int</span> a=<span class="hljs-number">10</span>,<span class="hljs-type">int</span> b=<span class="hljs-number">10</span>)</span></span>&#123;<span class="hljs-comment">//err é»˜è®¤å‚æ•°é‡å®šä¹‰</span><br><span class="hljs-keyword">return</span> a+b;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="3-2-å‡½æ•°é‡è½½"><a href="#3-2-å‡½æ•°é‡è½½" class="headerlink" title="3.2 å‡½æ•°é‡è½½"></a>3.2 å‡½æ•°é‡è½½</h3><h4 id="3-2-1-é‡è½½çš„åŸºæœ¬è¯­æ³•"><a href="#3-2-1-é‡è½½çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="3.2.1  é‡è½½çš„åŸºæœ¬è¯­æ³•"></a>3.2.1  é‡è½½çš„åŸºæœ¬è¯­æ³•</h4><p>ä½œç”¨:è®©å‡½æ•°åå¯ä»¥ç›¸åŒ,æé«˜å¤ç”¨æ€§</p><p>å‡½æ•°é‡è½½éœ€æ»¡è¶³çš„æ¡ä»¶ï¼š&#x3D;&#x3D;åŒä¸€ä¸ªä½œç”¨åŸŸä¸‹,å‡½æ•°åç§°ç›¸åŒ,å‡½æ•°å‚æ•°ç±»å‹ä¸åŒ æˆ–è€… ä¸ªæ•°ä¸åŒ æˆ–è€… é¡ºåºä¸åŒ&#x3D;&#x3D;</p><p>&#x3D;&#x3D;æ³¨æ„ï¼šåªæœ‰è¿”å›å€¼ä¸åŒä¸å¯ä»¥ä½œä¸ºå‡½æ•°é‡è½½çš„æ¡ä»¶ï¼Œå› ä¸ºæ— æ³•ä»…æŒ‰è¿”å›ç±»å‹åŒºåˆ†å‡½æ•°&#x3D;&#x3D;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-comment">//æ„å»ºå‡½æ•°é‡è½½</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;void func()çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">////////////////error/////////////</span><br><span class="hljs-comment">//int func()&#123;   //ä¸èƒ½è·Ÿä¸Šé¢çš„funcæ„æˆé‡è½½</span><br><span class="hljs-comment">//cout&lt;&lt;&quot;int func()çš„è°ƒç”¨&quot;&lt;&lt;endl;</span><br><span class="hljs-comment">//  return 1;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-comment">//////////////////////////////////</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(int a)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> b)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(double b)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">double</span> b)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(int a,double b)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">double</span> a,<span class="hljs-type">int</span> b)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(double a,int b)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//è°ƒç”¨ï¼Œæµ‹è¯•</span><br><span class="hljs-built_in">func</span>();<br><span class="hljs-built_in">func</span>(<span class="hljs-number">1</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">3.14</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5.1</span>);<br><span class="hljs-built_in">func</span>(<span class="hljs-number">3.6</span>,<span class="hljs-number">2</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="3-2-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"><a href="#3-2-2-å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹" class="headerlink" title="3.2.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹"></a>3.2.2 å‡½æ•°é‡è½½æ³¨æ„äº‹é¡¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//1,å¼•ç”¨ä¹Ÿå¯ä½œä¸ºé‡è½½çš„æ¡ä»¶</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; a)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(int&amp; a)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; a)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(const int&amp; a)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-type">int</span> n=<span class="hljs-number">3</span>;<br><span class="hljs-built_in">func</span>(n);<span class="hljs-comment">//ç¬¬ä¸€ä¸ª</span><br><span class="hljs-built_in">func</span>(<span class="hljs-number">10</span>);<span class="hljs-comment">//ç¬¬äºŒä¸ª</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//2.ç¢°åˆ°é»˜è®¤å‚æ•°</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;func(int a)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b=<span class="hljs-number">2</span>)</span></span>&#123; <span class="hljs-comment">//å«æœ‰é»˜è®¤å‚æ•°</span><br>cout&lt;&lt;<span class="hljs-string">&quot;func(int a,int b=2)çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-comment">//ä»¥ä¸Šä¸¤ä¸ªé‡è½½å‡½æ•°å®ä¾‹å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œä½†æ˜¯è°ƒç”¨æ—¶å¯èƒ½å‡ºç°é—®é¢˜</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br><span class="hljs-comment">//func(10); //err è¿™æ ·æ—¢å¯è°ƒç”¨1åˆå¯è°ƒç”¨2ï¼Œå‡ºç°äºŒä¹‰æ€§</span><br><span class="hljs-built_in">func</span>(<span class="hljs-number">3</span>,<span class="hljs-number">5</span>);<span class="hljs-comment">//è¿™æ ·è°ƒç”¨æ²¡æœ‰é—®é¢˜ï¼Œè°ƒç”¨äº†ç¬¬äºŒä¸ª  ï¼ˆæ— æ³•è°ƒç”¨å‡ºç¬¬ä¸€ä¸ªå‡½æ•°ï¼‰</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="4-ç±»å’Œå¯¹è±¡"><a href="#4-ç±»å’Œå¯¹è±¡" class="headerlink" title="4.ç±»å’Œå¯¹è±¡"></a>4.ç±»å’Œå¯¹è±¡</h2><p>ç±» â€“  åŒ…å« å±æ€§ï¼Œè¡Œä¸ºï¼Œï¼ˆå±æ€§å’Œè¡Œä¸ºéƒ½å« æˆå‘˜ï¼‰</p><h3 id="4-1å°è£…"><a href="#4-1å°è£…" class="headerlink" title="4.1å°è£…"></a>4.1å°è£…</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PI 3.14</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span><br>&#123;<br><span class="hljs-keyword">public</span>:  <span class="hljs-comment">//è®¿é—®æƒé™  publicè¡¨ç¤ºå…¬å…±æƒé™</span><br><br><span class="hljs-comment">//å±æ€§   å¦‚ï¼šåŠå¾„</span><br><span class="hljs-type">int</span> r;<br><span class="hljs-comment">//è¡Œä¸º  å¦‚ï¼šæ±‚å‘¨é•¿</span><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">calculate_C</span><span class="hljs-params">(<span class="hljs-type">int</span> c_r)</span></span>&#123;<br>r=c_r;<br><span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*PI*r;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Circle c1;<span class="hljs-comment">//é€šè¿‡ä¸Šé¢çš„Circleç±»æ¥åˆ›å»ºå¯¹è±¡(ä¹Ÿå«å®ä¾‹åŒ–)</span><br><span class="hljs-comment">//c1.r=10;//ç»™åœ†å¯¹è±¡ çš„å±æ€§è¿›è¡Œèµ‹å€¼</span><br>cout&lt;&lt;<span class="hljs-string">&quot;åœ†çš„å‘¨é•¿ä¸º &quot;</span>&lt;&lt;c1.<span class="hljs-built_in">calculate_C</span>(<span class="hljs-number">10</span>)&lt;&lt;endl; <span class="hljs-comment">//è°ƒç”¨calculate_c</span><br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">///////////////////////////////////////////</span><br>å°è£…æ„ä¹‰äºŒï¼šç±»åœ¨è®¾è®¡æ—¶ï¼Œå¯ä»¥æŠŠå±æ€§å’Œè¡Œä¸ºæ”¾åœ¨ä¸åŒçš„æƒé™ä¸‹ï¼ŒåŠ ä»¥æ§åˆ¶ã€‚<br><br>è®¿é—®æƒé™æœ‰ä¸‰ç§:<br><br>å…¬å…±æƒé™ <span class="hljs-keyword">public</span> æˆå‘˜ç±»å†…å¯ä»¥è®¿é—®,ç±»å¤–å¯ä»¥è®¿é—®<br>ä¿æŠ¤æƒé™ <span class="hljs-keyword">protected</span> æˆå‘˜ç±»å†…å¯ä»¥è®¿é—®,ç±»å¤–ä¸å¯ä»¥è®¿é—® å­ç±»ä¹Ÿå¯è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤å†…å®¹<br>ç§æœ‰æƒé™ <span class="hljs-keyword">private</span> æˆå‘˜ç±»å†…å¯ä»¥è®¿é—®,ç±»å¤–ä¸å¯ä»¥è®¿é—® å­ç±»ä¸å¯è®¿é—®çˆ¶ç±»çš„ç§æœ‰å†…å®¹<br><br>ç±»ä¸ç»“æ„ä½“çš„åŒºåˆ«ï¼šç±»çš„é»˜è®¤æƒé™ï¼ˆå³ä¸æ ‡æ³¨è®¿é—®æƒé™çš„æ—¶å€™ï¼‰æ˜¯ç§æœ‰ï¼Œè€Œç»“æ„ä½“é»˜è®¤æƒé™æ˜¯å…¬å…±<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span> &#123;<br><span class="hljs-keyword">public</span>:<br>string name;<br><br><span class="hljs-keyword">protected</span>:<br>string car;<br><br><span class="hljs-keyword">private</span>:<br>string password;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//ç±»å†…è®¿é—®å„å±æ€§</span><br>name = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br>car = <span class="hljs-string">&quot;å®é©¬&quot;</span>;<br>password = <span class="hljs-string">&quot;123456&quot;</span>;<br>&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>People p1;<span class="hljs-comment">//å®ä¾‹åŒ–</span><br>p1.name = <span class="hljs-string">&quot;æå››&quot;</span>;<span class="hljs-comment">//ç±»å¤–è®¿é—®å…¬å…±å±æ€§name</span><br><span class="hljs-comment">//ç±»å¤–è®¿é—®ä¿æŠ¤å±æ€§å’Œç§æœ‰å±æ€§ï¼Œéƒ½ä¼šæŠ¥é”™</span><br><span class="hljs-comment">//p1.car = &quot;å¥”é©°&quot;; //err</span><br><span class="hljs-comment">//p1.password = &quot;aaaaa&quot;; //err</span><br>p1.<span class="hljs-built_in">func</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">////////////////////////////////////////////</span><br><span class="hljs-comment">//æˆå‘˜å±æ€§è®¾ç½®ä¸ºç§æœ‰ ä½œç”¨ï¼š  </span><br><span class="hljs-comment">//1ã€å¯ä»¥è‡ªå·±æ§åˆ¶è¯»å†™æƒé™</span><br><span class="hljs-comment">//2ã€å¯¹äºå†™å¯ä»¥æ£€æµ‹æ•°æ®çš„æœ‰æ•ˆæ€§  é€šè¿‡æˆå‘˜å‡½æ•°è®¾ç½®çš„æ¡ä»¶è¿›è¡Œæœ‰æ•ˆæ€§åˆ¤æ–­</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span><br>&#123;<br><span class="hljs-comment">//å…¬å…±æ¥å£  è‡ªå·±è®¾ç½®è¯»å†™æƒé™---é€šè¿‡å…¬å…±æ¥å£åœ¨ç±»å¤–è®¾ç½®å±æ€§</span><br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//name è®¾ç½®ä¸ºå¯è¯»å¯å†™</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_name</span><span class="hljs-params">(string str)</span> </span>&#123;<br>name = str;<br>&#125;<br><span class="hljs-function">string <span class="hljs-title">get_name</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> name;<br>&#125;<br><span class="hljs-comment">//age è®¾ç½®ä¸ºåªè¯»</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get_age</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">return</span> age;<br>&#125;<br><br><span class="hljs-comment">//sex è®¾ç½®ä¸ºåªå†™</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_sex</span><span class="hljs-params">(string x)</span> </span>&#123;<br>sex = x;<br><span class="hljs-comment">//cout &lt;&lt; &quot;æ€§åˆ«è®¾ç½®ä¸ºï¼š&quot; &lt;&lt; sex &lt;&lt; endl; //æµ‹è¯•ç”¨</span><br>&#125;<br><br><br><span class="hljs-comment">//ç§æœ‰å±æ€§</span><br><span class="hljs-keyword">private</span>:<br>string name;<br><span class="hljs-type">int</span> age=<span class="hljs-number">0</span>;<span class="hljs-comment">//åˆå§‹åŒ–</span><br>string sex = <span class="hljs-string">&quot;male&quot;</span>;<br>&#125;;<br><br><br><span class="hljs-comment">//////////////////////////////////////////////////</span><br><span class="hljs-comment">//å¤šæ–‡ä»¶æ–¹å¼å®ç°  å¯¹äºä¸€ä¸ªç±»ä¸­åŒ…å«å…¶ä»–ç±»ï¼Œè¿™æ ·çš„è¾ƒä¸ºå¤æ‚çš„ç±»å¯é‡‡ç”¨å°†ä»–ä»¬åˆ†åˆ«åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­ç¼–è¾‘</span><br><br><span class="hljs-comment">//ç‚¹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setX</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>X=x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setY</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>Y=y;<br>&#125;<br><br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> X;<br><span class="hljs-type">int</span> Y;<span class="hljs-comment">//æ¨ªçºµåæ ‡</span><br>&#125;;<br><br><span class="hljs-comment">//åœ†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//ä¿®æ”¹åœ†å¿ƒ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_center</span><span class="hljs-params">(Point&amp; o)</span></span><br><span class="hljs-function"></span>&#123;<br>center=o;<br>&#125;<br><span class="hljs-comment">//........å…¶ä»– ç±»æ–¹æ³•çœç•¥.....</span><br><span class="hljs-keyword">private</span>:<br>Point center;<span class="hljs-comment">//åœ†å¿ƒ</span><br><span class="hljs-type">int</span> r;<span class="hljs-comment">//åŠå¾„</span><br>&#125;;<br><br><span class="hljs-comment">/////////////////////////////////////////////////////////</span><br><br><span class="hljs-comment">//ä»¥ä¸ŠCircleç±»ï¼ŒåŒ…å«äº†Pointç±»ï¼Œå¯ä»¥ç”¨å¤šæ–‡ä»¶çš„æ–¹æ³•ä¿®æ”¹ä¸ºï¼š</span><br><br><span class="hljs-comment">//point.h   //å¤´æ–‡ä»¶åªæ”¾å£°æ˜ --å‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once  <span class="hljs-comment">//é˜²æ­¢é‡å¤åŒ…å«</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-comment">//ç‚¹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setX</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setY</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span></span>;<br><span class="hljs-keyword">private</span>:<br><span class="hljs-type">int</span> X;<br><span class="hljs-type">int</span> Y;<span class="hljs-comment">//æ¨ªçºµåæ ‡</span><br>&#125;;<br><br><br><span class="hljs-comment">//point.cpp  æ”¾å‡½æ•°çš„å®ç°</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;point.h&quot;</span></span><br><span class="hljs-comment">//void setX(int x)  //ç›´æ¥å®šä¹‰çš„è¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¨å±€å‡½æ•°ï¼Œä½†å®é™…ä»–æ˜¯Pointä½œç”¨åŸŸä¸‹çš„æˆå‘˜å‡½æ•°,æ‰€ä»¥åŠ ä¸Š Point::</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Point::setX</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>X=x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Point::setY</span><span class="hljs-params">(<span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>Y=y;<br>&#125;<br><br><br><span class="hljs-comment">//circle.h</span><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once  <span class="hljs-comment">//é˜²æ­¢é‡å¤åŒ…å«</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;point.h&quot;</span> <span class="hljs-comment">//ç”¨åˆ°äº†point ç±»</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//åœ†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//ä¿®æ”¹åœ†å¿ƒ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">set_center</span><span class="hljs-params">(Point&amp; o)</span></span>;<br><span class="hljs-comment">//........å…¶ä»– ç±»æ–¹æ³•çœç•¥.....</span><br><span class="hljs-keyword">private</span>:<br>Point center;<span class="hljs-comment">//åœ†å¿ƒ</span><br><span class="hljs-type">int</span> r;<span class="hljs-comment">//åŠå¾„</span><br>&#125;<br><br><br><span class="hljs-comment">//circle.cpp</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;circle.h&quot;</span></span><br><br><span class="hljs-comment">//ä¿®æ”¹åœ†å¿ƒ</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Circle::set_center</span><span class="hljs-params">(Point&amp; o)</span></span><br><span class="hljs-function"></span>&#123;<br>    center=o;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-å¯¹è±¡ç‰¹æ€§"><a href="#4-2-å¯¹è±¡ç‰¹æ€§" class="headerlink" title="4.2 å¯¹è±¡ç‰¹æ€§"></a>4.2 å¯¹è±¡ç‰¹æ€§</h3><h4 id="4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"><a href="#4-2-1-æ„é€ å‡½æ•°å’Œææ„å‡½æ•°" class="headerlink" title="4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°"></a>4.2.1 æ„é€ å‡½æ•°å’Œææ„å‡½æ•°</h4><p>ä¸€ä¸ªå¯¹è±¡éœ€è¦ä½¿ç”¨å‰åˆå§‹åŒ–ï¼Œä½¿ç”¨åéœ€è¦åŠæ—¶æ¸…ç†ã€‚<br>c++åˆ©ç”¨äº†<strong>æ„é€ å‡½æ•°ï¼ˆç”¨äºåˆå§‹åŒ–ï¼‰</strong>å’Œ <strong>ææ„å‡½æ•°ï¼ˆç”¨äºæ¸…ç†ï¼‰</strong>è§£å†³ä¸Šè¿°é—®é¢˜,è¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨,å®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œ,å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶è¦æˆ‘ä»¬åšçš„äº‹æƒ…ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä¸æä¾›æ„é€ å’Œææ„ï¼Œç¼–è¯¦å™¨ä¼šæä¾›ç¼–è¯‘å™¨æä¾›çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æ˜¯ <strong>ç©ºå®ç°</strong> (å³å‡½æ•°ä¸­æ²¡æœ‰è¯­å¥ï¼‰ã€‚</p><p><code>æ„é€ å‡½æ•°è¯­æ³•ï¼šç±»å() &#123; &#125;</code></p><p>1.æ„é€ å‡½æ•°ï¼Œ&#x3D;&#x3D;æ²¡æœ‰è¿”å›å€¼ä¹Ÿä¸å†™void&#x3D;&#x3D;<br>&#x3D;&#x3D;å‡½æ•°åç§°ä¸ç±»åç›¸åŒ&#x3D;&#x3D;<br>æ„é€ å‡½æ•°<strong>å¯ä»¥æœ‰å‚æ•°</strong>ï¼Œå› æ­¤å¯ä»¥å‘ç”Ÿé‡è½½<br>ç¨‹åº<strong>åœ¨è°ƒç”¨å¯¹è±¡æ—¶å€™</strong>ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡</p><p>2,ææ„å‡½æ•°  è¿›è¡Œæ¸…ç†çš„æ“ä½œ<br>æ²¡æœ‰è¿”å›å€¼ ä¸å†™void<br>&#x3D;&#x3D;å‡½æ•°åå’Œç±»åç›¸åŒ&#x3D;&#x3D;  åœ¨åç§°å‰åŠ  ~  <code>è¯­æ³•ï¼š   ~ç±»åï¼ˆï¼‰&#123;&#125; </code><br>ææ„å‡½æ•° &#x3D;&#x3D;ä¸å¯ä»¥æœ‰å‚æ•°çš„ï¼Œä¸å¯ä»¥å‘ç”Ÿé‡è½½&#x3D;&#x3D;<br>å¯¹è±¡<strong>åœ¨é”€æ¯å‰</strong>ä¼šè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°,è€Œä¸”<strong>åªä¼šè°ƒç”¨ä¸€æ¬¡</strong></p><p><strong>æ„é€ å’Œææ„éƒ½æ˜¯å¿…é¡»æœ‰çš„å®ç°,å¦‚æœæˆ‘ä»¬è‡ªå·±ä¸æä¾›,ç¼–è¯‘å™¨ä¼šæä¾›ä¸€ä¸ªç©ºå®ç°ï¼ˆå³ä»€ä¹ˆè¯­å¥éƒ½æ²¡æœ‰ï¼‰çš„æ„é€ å’Œææ„</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ„é€ å‡½æ•°</span><br><span class="hljs-built_in">Test</span>()&#123;  <br>cout&lt;&lt;<span class="hljs-string">&quot;test1æ„é€ å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Test</span>()&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;test2ææ„å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fun</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Test f; <span class="hljs-comment">// åœ¨æ ˆåŒºåˆ›å»ºå¯¹è±¡fï¼Œå‡½æ•°æ‰§è¡Œå®Œåä¼šè‡ªåŠ¨é‡Šæ”¾è¯¥å¯¹è±¡ï¼Œæ‰€ä»¥ä¹Ÿä¼šè°ƒç”¨ææ„å‡½æ•°</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">fun</span>();<span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span><br><span class="hljs-comment">//Test f1; //æ‰§è¡Œå®Œè¿™ä¸€è¡Œåªä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œåªæœ‰mainå‡½æ•°æ‰§è¡Œå®Œæ‰ä¼šè°ƒç”¨ææ„å‡½æ•°ï¼Œä½†çª—å£ä¹Ÿæ¶ˆå¤± (è°ƒç”¨ææ„å‡½æ•°ä¼šä¸€é—ªè€Œè¿‡)</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨"><a href="#4-2-2-æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨" class="headerlink" title="4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨"></a>4.2.2 æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨</h4><p>ä¸¤ç§åˆ†ç±»æ–¹å¼ï¼š</p><p>æŒ‰ç…§å‚æ•°åˆ†ç±»:  æ— å‚æ„é€  ï¼ˆä¹Ÿå« é»˜è®¤æ„é€ ï¼‰å’Œ æœ‰å‚æ„é€ <br>æŒ‰ç…§ç±»å‹åˆ†ç±»:   æ™®é€šæ„é€        æ‹·è´æ„é€ </p><p>ä¸‰ç§è°ƒç”¨æ–¹å¼ï¼š<br>æ‹¬å·æ³•<br>æ˜¾ç¤ºæ³•<br>éšå¼è½¬æ¢æ³•</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-comment">//æ„é€ å‡½æ•°  é‡è½½</span><br><span class="hljs-built_in">Test</span>()&#123;  <br>cout&lt;&lt;<span class="hljs-string">&quot;Test æ— å‚æ„é€ å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><span class="hljs-built_in">Test</span>(<span class="hljs-type">int</span> a)&#123;  <br>age=a;<br>cout&lt;&lt;<span class="hljs-string">&quot;Test æœ‰å‚æ„é€ å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°  (ä»¥ä¸Šä¸¤ä¸ªéƒ½æ˜¯æ™®é€šæ„é€ )</span><br>    <span class="hljs-built_in">Test</span>(<span class="hljs-type">const</span> Test &amp;p)&#123; <span class="hljs-comment">//å¼•ç”¨ç±»å‹æ¥æ”¶</span><br><span class="hljs-comment">//å°†ä¼ å…¥çš„å¯¹è±¡çš„æ‰€æœ‰å±æ€§,æ‹·è´åˆ°æˆ‘èº«ä¸Š</span><br>age = p. age;<br>height=p.height;<br>cout&lt;&lt;<span class="hljs-string">&quot;Test æ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">//ææ„å‡½æ•°</span><br>~<span class="hljs-built_in">Test</span>()&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;Test ææ„å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-type">int</span> age;<br><span class="hljs-type">double</span> height;<br>&#125;;<br><br><span class="hljs-comment">//è°ƒç”¨</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fun</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//è°ƒç”¨æ–¹æ³•</span><br><br><span class="hljs-comment">//1ï¼Œæ‹¬å·æ³•</span><br>Test f1; <span class="hljs-comment">//é»˜è®¤æ„é€ å‡½æ•°çš„è°ƒç”¨</span><br><span class="hljs-function">Test <span class="hljs-title">f2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<span class="hljs-comment">//æœ‰å‚æ„é€ </span><br><span class="hljs-function">Test <span class="hljs-title">f3</span><span class="hljs-params">(f2)</span></span>;<span class="hljs-comment">//æ‹·è´æ„é€ </span><br><span class="hljs-comment">//æµ‹è¯•ç»“æœ</span><br><span class="hljs-comment">//cout&lt;&lt;&quot;f2çš„å¹´é¾„ä¸ºï¼š&lt;&lt;f2.age&lt;&lt;endl;   //10</span><br><span class="hljs-comment">//cout&lt;&lt;&quot;f3çš„å¹´é¾„ä¸ºï¼š&lt;&lt;f3. age&lt;&lt;end1:   //10</span><br><br><span class="hljs-comment">//æ³¨æ„äº‹é¡¹:</span><br><span class="hljs-comment">//è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°æ—¶å€™,ä¸è¦åŠ () </span><br><span class="hljs-comment">//å¦‚ä¸‹é¢è¿™è¡Œä»£ç ,ç¼–è¯‘å™¨ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªå‡½æ•°çš„å£°æ˜,ä¸ä¼šè®¤ä¸ºåœ¨åˆ›å»ºå¯¹è±¡ï¼š  Test p();</span><br><br><br><br><span class="hljs-comment">//2ã€æ˜¾ç¤ºæ³•</span><br>    Test pl;<span class="hljs-comment">//é»˜è®¤æ„é€ å‡½æ•°çš„è°ƒç”¨</span><br>    Test p2 = <span class="hljs-built_in">Test</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">//æœ‰å‚æ„é€ </span><br>    Test p3 = <span class="hljs-built_in">Test</span>(p2);<span class="hljs-comment">//æ‹·è´æ„é€ </span><br><br><br><span class="hljs-comment">//æ³¨æ„äº‹é¡¹:</span><br><span class="hljs-built_in">Test</span> (<span class="hljs-number">10</span>) ;<span class="hljs-comment">// ä¸Šé¢æ‹¬å·æ³•è°ƒç”¨æ„é€ å‡½æ•°éƒ½æ˜¯åˆ›å»ºåŒ¿åå¯¹è±¡---ç‰¹ç‚¹ï¼šå½“å‰è¡Œæ‰§è¡Œç»“æŸåï¼Œç³»ç»Ÿä¼šç«‹å³å›æ”¶åŒ¿åå¯¹è±¡</span><br>cout&lt;&lt;<span class="hljs-string">&quot;over&quot;</span>&lt;&lt;endl;  <span class="hljs-comment">///æµ‹è¯•ç”¨  ç»“æœï¼šTest(10)å…ˆè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°åé”€æ¯ï¼Œæ¥ç€å†è¾“å‡º&quot;over&quot;</span><br><br><br><span class="hljs-comment">//ä¸è¦åˆ©ç”¨æ‹·è´æ„é€ å‡½æ•° åˆå§‹åŒ–åŒ¿åå¯¹è±¡ ç¼–è¯‘å™¨ä¼šè®¤ä¸º Test (p3); ç­‰ä»·äº Test p3;  å³å¯¹è±¡å£°æ˜ï¼Œæ‰€ä»¥err: p3é‡å®šä¹‰ã€‚</span><br><br><span class="hljs-comment">//3ã€éšå¼è½¬æ¢æ³•</span><br>Test p4 = <span class="hljs-number">10</span>;<span class="hljs-comment">//ç›¸å½“äº å†™äº† Test p4 = Test(10);</span><br>Test p5 = p4;<span class="hljs-comment">// Test p5 = Test(p4);</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">fun</span>();<span class="hljs-comment">//è°ƒç”¨å‡½æ•°</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº"><a href="#4-2-3-æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº" class="headerlink" title="4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº"></a>4.2.3 æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœº</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//C++ä¸­æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨æ—¶æœºé€šå¸¸æœ‰ä¸‰ç§æƒ…å†µ:</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><br>    <span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;é»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<br>    &#123;<br>        m_Age = age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æœ‰å‚æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; p)<br>    &#123;<br>        m_Age = p.m_Age;<br>        cout &lt;&lt; <span class="hljs-string">&quot;æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    ~<span class="hljs-built_in">Person</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;ææ„å‡½æ•°è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    <span class="hljs-type">int</span> m_Age;<br><br><br>&#125;;<br><br><span class="hljs-comment">//1. ä½¿ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå®Œæ¯•çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;      <span class="hljs-comment">//æœ‰å‚æ„é€ </span><br>    Person p2=p1;       <span class="hljs-comment">//æ‹·è´æ„é€ </span><br>    cout &lt;&lt; <span class="hljs-string">&quot;p2çš„å¹´é¾„&quot;</span> &lt;&lt; p2.m_Age &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//æ‰§è¡Œå®Œtest1åçš„ç»“æœï¼š</span><br><span class="hljs-comment">//æœ‰å‚æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//p2çš„å¹´é¾„10</span><br><span class="hljs-comment">//ææ„å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//ææ„å‡½æ•°è°ƒç”¨</span><br><br><br><span class="hljs-comment">//2.å€¼ä¼ é€’çš„æ–¹å¼çµ¦å‡½æ•°å‚æ•°ä¼ å€¼</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">do_work</span><span class="hljs-params">(Person p)</span>  <span class="hljs-comment">//å½¢å‚ä»…ä½œä¸ºå®å‚çš„ä¸€ä»½æ‹·è´   </span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//ç©ºå®ç°</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p;<br>    <span class="hljs-built_in">do_work</span>(p);          <span class="hljs-comment">//è°ƒç”¨do_workå‡½æ•°ï¼Œå°†å®å‚pæ‹·è´ç»™å½¢å‚p</span><br>&#125;<br><span class="hljs-comment">//ç»“æœï¼š </span><br><span class="hljs-comment">//é»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//ææ„å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//ææ„å‡½æ•°è°ƒç”¨</span><br><br><br><br><span class="hljs-comment">//3.ä»¥å€¼æ–¹å¼è¿”å›å±€éƒ¨å¯¹è±¡</span><br><span class="hljs-function">Person <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p1;<br>    cout &lt;&lt; (<span class="hljs-type">int</span>*) &amp; p1 &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> p1;<span class="hljs-comment">//è¿”å›å€¼è€Œéæœ¬èº«ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ‹·è´å€¼ç„¶åä¼ é€’</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Person p = <span class="hljs-built_in">func</span>();<br>    cout &lt;&lt; (<span class="hljs-type">int</span>*)&amp;p &lt;&lt; endl;<br>&#125;<br><span class="hljs-comment">//ç»“æœï¼š</span><br><span class="hljs-comment">//é»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//00000021470FF4A4</span><br><span class="hljs-comment">//00000021470FF4A4</span><br><span class="hljs-comment">//ææ„å‡½æ•°è°ƒç”¨</span><br><span class="hljs-comment">//æ²¡æœ‰è°ƒç”¨æ‹·è´æ„é€ ï¼ŒåŸå› æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–ï¼šç¼–è¯‘å™¨æ£€æµ‹åˆ°å¯ä»¥çœç•¥æ‹·è´æ„é€ å‡½æ•°è°ƒç”¨çš„æƒ…å†µï¼Œå®ƒå¯èƒ½ä¼šå°†å…¶çœç•¥ä»¥æé«˜ä»£ç æ•ˆç‡ã€‚</span><br><span class="hljs-comment">//å®é™…åº”è¯¥æœ‰æ‹·è´æ„é€ ï¼ˆæ”¾åˆ°åˆ°ç¬¬å››è¡Œï¼‰ï¼Œè€Œä¸”ä¸¤å¤„ åœ°å€ä¹Ÿä¸ç›¸åŒï¼ï¼ï¼</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//test1();</span><br>    <span class="hljs-comment">//test2();</span><br>    <span class="hljs-built_in">test3</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>####4.2.8 é™æ€æˆå‘˜</p><p>é™æ€æˆå‘˜å°±æ˜¯åœ¨æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å‰åŠ ä¸Šå…³é”®å­—static,ç§°ä¸ºé™æ€æˆå‘˜ã€‚</p><p>é™æ€æˆå‘˜åˆ†ä¸ºï¼š é™æ€æˆå‘˜å˜é‡ï¼Œé™æ€æˆ–å‘˜å‡½æ•°ã€‚<br><strong>ä¸å±äºæŸä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯æ‰€æœ‰å¯¹è±¡å…±äº«åŒâ€”ä»½æ•°æ®</strong><br>åœ¨ç¼–è¯‘é˜¶æ®µåˆ†é…å†…å­˜<br><strong>ç±»å†…å£°æ˜ï¼Œç±»å¤–åˆå§‹åŒ–</strong> ï¼Œ<strong>å› ä¸ºé™æ€æˆå‘˜å±äºæ•´ä¸ªç±»ï¼Œè€Œä¸å±äºæŸä¸ªå¯¹è±¡ï¼Œå¦‚æœåœ¨ç±»å†…åˆå§‹åŒ–ï¼Œä¼šå¯¼è‡´æ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«è¯¥é™æ€æˆå‘˜ï¼Œè¿™æ˜¯çŸ›ç›¾çš„</strong><br>åªæœ‰é™æ€å¸¸é‡æˆå‘˜æ‰èƒ½åœ¨ç±»å†…åˆå§‹åŒ–</p><p>æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä¸ªå‡½æ•°<br>é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<span class="hljs-comment">//ç±»å†…å£°æ˜</span><br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">static</span> <span class="hljs-type">int</span> A;<span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡</span><br><span class="hljs-type">int</span> num;<span class="hljs-comment">//éé™æ€</span><br><span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">int</span> T=<span class="hljs-number">10</span>;<span class="hljs-comment">//é™æ€å¸¸é‡æˆå‘˜</span><br><br><span class="hljs-keyword">private</span>:   <span class="hljs-comment">//é™æ€æˆå‘˜å˜é‡ä¹Ÿæ˜¯æœ‰è®¿é—®æƒé™çš„ï¼ˆé™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯ï¼‰ï¼Œä½†ä¹Ÿè¦åœ¨ç±»å¤–åˆå§‹åŒ–  </span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> B;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>B=<span class="hljs-number">99</span>;<br><span class="hljs-comment">//num=999;  //err!!! é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å˜é‡ã€‚ å› ä¸ºæ— æ³•åŒºåˆ†æ˜¯å¯¹å“ªä¸ªå¯¹è±¡çš„éé™æ€å˜é‡è¿›è¡Œæ“ä½œ</span><br>cout&lt;&lt;<span class="hljs-string">&quot;é™æ€æˆå‘˜å‡½æ•°çš„è°ƒç”¨&quot;</span>&lt;&lt;endl;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//åˆå§‹åŒ–</span><br><span class="hljs-type">int</span> Person::A=<span class="hljs-number">100</span>;<span class="hljs-comment">//ç±»å¤–å£°æ˜å¹¶åˆå§‹åŒ–  Person:: è¡¨ç¤ºAæ‰€å±çš„ä½œç”¨åŸŸ</span><br><span class="hljs-type">int</span> Person::B=<span class="hljs-number">77</span>;<span class="hljs-comment">//ç±»å¤–å£°æ˜å¹¶åˆå§‹åŒ–</span><br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>A=<span class="hljs-number">200</span>; <span class="hljs-comment">//å…±äº«åŒâ€”ä»½æ•°æ®ï¼Œå³æ‰€æœ‰çš„Aéƒ½æ˜¯åŒä¸€ä¸ªåœ°å€çš„A </span><br>cout&lt;&lt;A&lt;&lt;endl;<span class="hljs-comment">//ç»“æœæ˜¯200</span><br>Person p;<br>cout&lt;&lt;p.A&lt;&lt;endl; <span class="hljs-comment">//200  é€šè¿‡å¯¹è±¡è®¿é—®</span><br>cout&lt;&lt;Person::A&lt;&lt;endl; <span class="hljs-comment">//ä¹Ÿæ˜¯200  ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè®¿é—®</span><br><br><span class="hljs-comment">//cout&lt;&lt;Person::B&lt;&lt;endl; // error,ç±»å¤–æ— æ³•è®¿é—®ç§æœ‰é™æ€æˆå‘˜å˜é‡</span><br><br><span class="hljs-comment">//åŒ é™æ€æˆå‘˜å˜é‡ï¼Œä¸¤ç§è®¿é—®æ–¹å¼</span><br>p.<span class="hljs-built_in">func</span>();<span class="hljs-comment">//</span><br>Person::<span class="hljs-built_in">func</span>(); <span class="hljs-comment">//é€šè¿‡ç±»åè°ƒç”¨</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"><a href="#4-3-C-å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ" class="headerlink" title="4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ"></a>4.3 C++å¯¹è±¡æ¨¡å‹å’ŒthisæŒ‡é’ˆ</h3><p>####4.3.1 æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨</p><p>åœ¨C++ä¸­ï¼Œç±»å†…çš„æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°åˆ†å¼€å­˜å‚¨<br>åªæœ‰éé™æ€æˆå‘˜å˜é‡æ‰å±äºç±»çš„å¯¹è±¡ä¸Šï¼Œæˆå‘˜å‡½æ•°å’Œé™æ€æˆå‘˜å˜é‡éƒ½ä¸å±äºç±»ä¸Š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//ç©ºç±»ä¹Ÿå ä¸€ä¸ªå­—èŠ‚çš„ç©ºé—´</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person1</span>&#123;<br>&#125;;<br>Person1 p1;<span class="hljs-comment">//</span><br>cout&lt;&lt;<span class="hljs-built_in">sizeof</span>(p1)&lt;&lt;endl; <span class="hljs-comment">//å¤§å°ä¸º1</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person2</span>&#123;<br><span class="hljs-type">int</span> a;<br><span class="hljs-comment">//ä»¥ä¸‹éƒ½ä¸å±äºç±»çš„å¯¹è±¡ä¸Š</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> b;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>&#123;&#125;;<br><span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span>&#123;&#125;;<br>&#125;<br>Person2 p2;<br>cout&lt;&lt;<span class="hljs-built_in">sizeof</span>(p2)&lt;&lt;endl; <span class="hljs-comment">//4</span><br></code></pre></td></tr></table></figure><h4 id="4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ"><a href="#4-3-2-thisæŒ‡é’ˆæ¦‚å¿µ" class="headerlink" title="4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ"></a>4.3.2 thisæŒ‡é’ˆæ¦‚å¿µ</h4><p>æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç <br>é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ<br>C++é€šè¿‡æä¾›ç‰¹æ®Šçš„å¯¹è±¡æŒ‡é’ˆâ€“ thisæŒ‡é’ˆï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œ<strong>thisæŒ‡é’ˆæŒ‡å‘è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•°æ‰€å±çš„å¯¹è±¡</strong> ï¼ˆæœ¬è´¨æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼š <code> ç±»å *const this</code>ï¼‰</p><p>thisæŒ‡é’ˆæ˜¯&#x3D;&#x3D;éšå«&#x3D;&#x3D;æ¯ä¸€ä¸ªéé™æ€æˆå‘˜å‡½æ•°å†…çš„ä¸€ç§æŒ‡é’ˆ<br>thisæŒ‡é’ˆä¸éœ€è¦å®šä¹‰ï¼Œç›´æ¥ä½¿ç”¨å³å¯</p><p>thisæŒ‡é’ˆçš„ç”¨é€”:<br>å½“å½¢å‚å’Œæˆå‘˜å˜é‡åŒåæ—¶ï¼Œå¯ç”¨thisæŒ‡é’ˆæ¥åŒºåˆ†<br>åœ¨ç±»çš„éé™æ€æˆå‘˜å‡½æ•°ä¸­è¿”å›å¯¹è±¡æœ¬èº«ï¼Œå¯ç”¨   return *this</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<span class="hljs-comment">//æ„é€ å‡½æ•°</span><br>&#123;<br><span class="hljs-comment">//age=age; //err å¦‚æœè¿™æ ·å†™ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸ºå½¢å‚çš„ageå’Œæˆå‘˜å˜é‡çš„ageæ˜¯åŒä¸€ä¸ªï¼Œå°±ä¼šå‡ºbug</span><br><span class="hljs-keyword">this</span>-&gt;age=age;<span class="hljs-comment">//ç”¨thisæŒ‡é’ˆï¼ŒthisæŒ‡é’ˆæŒ‡å‘ è¢«è°ƒç”¨çš„æˆå‘˜å‡½æ•° æ‰€å±çš„å¯¹è±¡   </span><br>&#125;<br><br><span class="hljs-comment">//................................</span><br><span class="hljs-function">Person&amp; <span class="hljs-title">age_add</span><span class="hljs-params">(Person&amp; p)</span><span class="hljs-comment">//æ³¨æ„è¦ç”¨ å¼•ç”¨æ–¹å¼ è¿”å›.</span></span><br><span class="hljs-function"><span class="hljs-comment">//å¦‚æœè¿”å›ç±»å‹æ˜¯void,åˆ™ä¸èƒ½é“¾å¼è°ƒç”¨ï¼Œåªèƒ½p.age_add(p1)</span></span><br><span class="hljs-function"><span class="hljs-comment">//å¦‚æœè¿”å›ç±»å‹æ˜¯ Person ,éå¼•ç”¨ï¼Œp2.age_add(p1).age_add(p1).age_add(p1); é‚£ä¹ˆè¿™æ ·é“¾å¼è°ƒç”¨è¿”å›çš„ä¼šæ˜¯p2çš„å¤åˆ¶ï¼Œp2åªæœ‰ç¬¬ä¸€æ¬¡ä¼šè¢«ä¿®æ”¹</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">this</span>-&gt;age+=p.age;<br><span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>&#125;<br><br><span class="hljs-type">int</span> age;<br>&#125;;<br><br><span class="hljs-comment">//...................................</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<span class="hljs-comment">//p1è°ƒç”¨æ„é€ å‡½æ•°ï¼ŒthisæŒ‡é’ˆæŒ‡å‘çš„æ˜¯p1</span><br>cout&lt;&lt;<span class="hljs-string">&quot;p1çš„å¹´é¾„ &quot;</span>&lt;&lt;p1.age&lt;&lt;endl;<br><br><span class="hljs-comment">//...................................</span><br><span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br><br><span class="hljs-comment">//é“¾å¼è°ƒç”¨</span><br>p2.<span class="hljs-built_in">age_add</span>(p1).<span class="hljs-built_in">age_add</span>(p1).<span class="hljs-built_in">age_add</span>(p1);<span class="hljs-comment">//40</span><br><br>cout&lt;&lt;<span class="hljs-string">&quot;p2çš„å¹´é¾„ï¼š &quot;</span>&lt;&lt;p2.age&lt;&lt;endl; <br><br>&#125;<br><br><span class="hljs-comment">//...................................</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">test1</span>();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"><a href="#4-3-3-ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°" class="headerlink" title="4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°"></a>4.3.3 ç©ºæŒ‡é’ˆè®¿é—®æˆå‘˜å‡½æ•°</h4><p>C++ä¸­ç©ºæŒ‡é’ˆä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨æˆå‘˜å‡½æ•°çš„ï¼Œä½†æ˜¯ä¹Ÿè¦<strong>æ³¨æ„æœ‰æ²¡æœ‰ç”¨åˆ°thisæŒ‡é’ˆ</strong>ï¼Œå¦‚æœç”¨åˆ°thisæŒ‡é’ˆï¼Œéœ€è¦åŠ ä»¥åˆ¤æ–­ä¿è¯ä»£ç çš„å¥å£®æ€§</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show_Class_name</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;ç±»åä¸º Person&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show_Person_age</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span>(!<span class="hljs-keyword">this</span>)&#123; <span class="hljs-comment">//é˜²é”™å¤„ç† ç©ºæŒ‡é’ˆè°ƒç”¨ç±»æ—¶è®¿é—®é‡Œé¢çš„æˆå‘˜å˜é‡ï¼Œè¿™æ ·ä¼šæŠ¥é”™</span><br>cout&lt;&lt;<span class="hljs-keyword">this</span>-&gt;m_age&lt;&lt;endl;<br>&#125;<br>&#125;<br><span class="hljs-type">int</span> m_age;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Person *p=<span class="hljs-literal">NULL</span>;      <span class="hljs-comment">//ç©º</span><br><br>p-&gt;<span class="hljs-built_in">show_Class_name</span>();<br>p-&gt;<span class="hljs-built_in">show_Person_age</span>();<span class="hljs-comment">//å¦‚æœæ²¡æœ‰é˜²é”™å¤„ç†å°±ä¼šerr</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°"><a href="#4-3-4-constä¿®é¥°æˆå‘˜å‡½æ•°" class="headerlink" title="4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°"></a>4.3.4 constä¿®é¥°æˆå‘˜å‡½æ•°</h4><p>å¸¸å‡½æ•°ï¼š<br>æˆå‘˜å‡½æ•°åé¢åŠ conståæˆ‘ä»¬ç§°ä¸ºè¿™ä¸ªå‡½æ•°ä¸ºå¸¸å‡½æ•°<br><strong>å¸¸å‡½æ•°å†…ä¸å¯ä»¥ä¿®æ”¹æˆå‘˜å±æ€§</strong><br>æˆå‘˜å±æ€§å£°æ˜æ—¶<strong>åŠ å…³é”®å­—mutableåï¼Œåœ¨å¸¸å‡½æ•°ä¸­ä¾ç„¶å¯ä»¥ä¿®æ”¹</strong></p><p>å¸¸å¯¹è±¡ï¼š<br>å£°æ˜å¯¹è±¡å‰åŠ constç§°è¯¥å¯¹è±¡ä¸ºå¸¸å¯¹è±¡<br><strong>å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">//thisæŒ‡é’ˆçš„æœ¬è´¨ æ˜¯æŒ‡é’ˆå¸¸é‡  æŒ‡é’ˆçš„æŒ‡å‘æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„  å¦‚ï¼šPerson * const this; this = NULL;//err</span><br>    <br>    <span class="hljs-comment">//æœ¬è´¨ï¼šåœ¨æˆå‘˜å‡½æ•°åé¢åŠ const,ä¿®é¥°çš„æ˜¯thisæŒ‡é’ˆ,è®©æŒ‡é’ˆæŒ‡å‘çš„å€¼ä¹Ÿä¸å¯ä»¥ä¿®æ”¹ï¼ï¼ï¼ const Person * const this</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">change_val</span><span class="hljs-params">()</span> <span class="hljs-type">const</span>   <span class="hljs-comment">//å¸¸å‡½æ•°</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-comment">//this-&gt;m_A = 100; //ä¸å¯ä¿®æ”¹</span><br>    <span class="hljs-keyword">this</span>-&gt;m_B=<span class="hljs-number">200</span>;<span class="hljs-comment">//ç‰¹æ®Šå˜é‡,å³ä½¿åœ¨å¸¸å‡½æ•°ä¸­,ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼,åŠ å…³é”®å­—mutable</span><br>    &#125;<br>    <span class="hljs-comment">//................................</span><br>    <br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span>              <span class="hljs-comment">//ä¸æ˜¯å¸¸å‡½æ•°</span></span><br><span class="hljs-function">    </span>&#123;<br>m_A=<span class="hljs-number">222</span>;<br>&#125;<br><br><span class="hljs-type">int</span> m_A:<br><span class="hljs-keyword">mutable</span> <span class="hljs-type">int</span> m_B;<br><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">const</span> Person p;  <span class="hljs-comment">//åˆ›å»ºå¸¸å¯¹è±¡</span><br><span class="hljs-comment">//p.m_A=100;     //err</span><br>p.m_B=<span class="hljs-number">300</span>;       <span class="hljs-comment">//å¯ä¿®æ”¹</span><br><br><span class="hljs-comment">//å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•° </span><br><span class="hljs-comment">//å¸¸å¯¹è±¡ä¸èƒ½ä¿®æ”¹å±æ€§ï¼Œå¸¸å‡½æ•°ä¹Ÿä¸èƒ½ï¼Œå¦‚æœèƒ½è°ƒç”¨æ™®é€šå‡½æ•°ï¼Œé‚£å°±èƒ½å¤Ÿä¿®æ”¹å±æ€§äº†ï¼Œæ‰€ä»¥å¸¸å¯¹è±¡åªèƒ½è°ƒç”¨å¸¸å‡½æ•°ã€‚ err </span><br><span class="hljs-comment">// p.func();     //err  </span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-å‹å…ƒ"><a href="#4-4-å‹å…ƒ" class="headerlink" title="4.4 å‹å…ƒ"></a>4.4 å‹å…ƒ</h3><p>åœ¨ç¨‹åºé‡Œ,æœ‰äº›<strong>ç§æœ‰å±æ€§</strong>ä¹Ÿæƒ³è®©<strong>ç±»å¤–</strong>ç‰¹æ®Šçš„ä¸€äº›å‡½æ•°æˆ–è€…ç±»è¿›è¡Œè®¿é—®,å°±éœ€è¦ç”¨åˆ°å‹å…ƒçš„æŠ€æœ¯<br>å‹å…ƒçš„ç›®çš„å°±æ˜¯è®©ä¸€ä¸ªå‡½æ•°æˆ–è€…ç±» è®¿é—®å¦ä¸€ä¸ªç±»ä¸­<strong>ç§æœ‰æˆå‘˜</strong><br>ï¼Œå‹å…ƒçš„å…³é”®å­—ä¸º &#x3D;&#x3D;friend&#x3D;&#x3D;</p><p>å‹å…ƒçš„ä¸‰ç§å®ç°ï¼š</p><blockquote><p>å…¨å±€å‡½æ•°åšå‹å…ƒ<br>ç±»åšå‹å…ƒ<br>æˆå‘˜å‡½æ•°åšå‹å…ƒ</p></blockquote><h4 id="4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ"><a href="#4-4-1-å…¨å±€å‡½æ•°åšå‹å…ƒ" class="headerlink" title="4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ"></a>4.4.1 å…¨å±€å‡½æ•°åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-comment">//å»ºç­‘ç‰©ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span> <br>&#123;<br><span class="hljs-comment">//å°†å…¨å±€å‡½æ•°func1 ä½œä¸ºBuildingçš„æœ‹å‹,ä½¿å…¶å¯è®¿é—®Buildingä¸­çš„ç§æœ‰æˆå‘˜</span><br><span class="hljs-function"><span class="hljs-keyword">friend</span> <span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">(Building* b)</span></span>;<br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Building</span>() <span class="hljs-comment">//æ„é€ å‡½æ•°</span><br>    &#123;<br>    m_sitting_room=<span class="hljs-string">&quot;å®¢å…&quot;</span>;<br>    m_bedroom=<span class="hljs-string">&quot;å§å®¤&quot;</span>;<br>    &#125;<br>    <br><span class="hljs-keyword">public</span>:<br>string m_sitting_room;<br><span class="hljs-keyword">private</span>:<span class="hljs-comment">//ç§æœ‰</span><br>string m_bedroom; <br><br>&#125;;<br><br><span class="hljs-comment">//............................</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func1</span><span class="hljs-params">(Building *b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//è®¿é—®å…¬å…±å±æ€§</span><br>cout&lt;&lt;<span class="hljs-string">&quot;func1å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot;</span>&lt;&lt;b-&gt;m_sitting_room&lt;&lt;endl;<br><span class="hljs-comment">//è®¿é—®ç§æœ‰å±æ€§</span><br>cout&lt;&lt;<span class="hljs-string">&quot;func1å‡½æ•°æ­£åœ¨è®¿é—®ï¼š&quot;</span>&lt;&lt;b-&gt;m_bedroom&lt;&lt;endl;<br><br>&#125;<br><br><span class="hljs-comment">//............................</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>Building b; <br><span class="hljs-built_in">func1</span>(&amp;b);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-4-2-ç±»åšå‹å…ƒ"><a href="#4-4-2-ç±»åšå‹å…ƒ" class="headerlink" title="4.4.2 ç±»åšå‹å…ƒ"></a>4.4.2 ç±»åšå‹å…ƒ</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-comment">//å»ºç­‘ç‰©ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Building</span> <br>&#123;<br><span class="hljs-comment">//old_friendsç±» ä½œä¸ºBuildingçš„æœ‹å‹,ä½¿å…¶å¯è®¿é—®Buildingä¸­çš„ç§æœ‰æˆå‘˜</span><br><span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">old_friends</span>; <span class="hljs-comment">//@@</span><br><br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">Building</span>(); <span class="hljs-comment">//æ„é€ å‡½æ•°</span><br><br><span class="hljs-keyword">public</span>:<br>string m_sitting_room;<br><span class="hljs-keyword">private</span>: <span class="hljs-comment">//ç§æœ‰</span><br>string m_bedroom; <br>&#125;;<br><br><span class="hljs-comment">//Building çš„æ„é€ å‡½æ•°</span><br><span class="hljs-comment">//ï¼ï¼ï¼ ç±»å¤–å®ç°å‡½æ•°   è¦ç”¨ ç±»å::å‡½æ•°å  çš„å½¢å¼ï¼ï¼ï¼ï¼</span><br>Building::<span class="hljs-built_in">Building</span>()  <span class="hljs-comment">//è¢«è°ƒç”¨ è¿›è¡Œåˆå§‹åŒ–</span><br>&#123;<br>    m_sitting_room=<span class="hljs-string">&quot;å®¢å…ï¼ˆå…¬å…±å±æ€§ï¼‰&quot;</span>;<br>    m_bedroom=<span class="hljs-string">&quot;å§å®¤ï¼ˆç§æœ‰å±æ€§ï¼‰&quot;</span>;<br>&#125;<br><span class="hljs-comment">//.................................</span><br><br><span class="hljs-comment">// old_friendsç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">old_friends</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-built_in">old_friends</span>();<span class="hljs-comment">//æ„é€ å‡½æ•°</span><br>    <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">visit</span><span class="hljs-params">()</span></span>;    <span class="hljs-comment">//è®¿é—®å‡½æ•° ç±»å†…å£°æ˜  è®¾ç½®ä¸ºå¯è®¿é—®Buildingç±»ç§æœ‰å‡½æ•°</span><br>    <span class="hljs-comment">//void visit_2();//è®¾ç½®ä¸ºä¸å¯è®¿é—®Buildingç±»ç§æœ‰å‡½æ•°  </span><br>    <span class="hljs-comment">//å°†ç¬¬6è¡Œæ”¹ä¸º friend class old_friends::visit(); å³å¯ï¼Œï¼ˆå‘Šè¯‰Buildingï¼Œold_friendsç±»çš„visitå‡½æ•°æ˜¯æœ‹å‹å‡½æ•°ï¼Œvisit_2ä¸æ˜¯ï¼‰æ­¤å¤„ä¸åšå®ç°</span><br>    <br><span class="hljs-keyword">private</span>:<br>Building *b;<br>&#125;;<br><br><span class="hljs-comment">//old_friendsçš„æ„é€ å‡½æ•°</span><br>old_friends::<span class="hljs-built_in">old_friends</span>()<br>&#123;<br>b=<span class="hljs-keyword">new</span> Building;<span class="hljs-comment">//è®¿é—®Buildingç±» å¹¶è°ƒç”¨æ„é€ å‡½æ•°</span><br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">old_friends::visit</span><span class="hljs-params">()</span>  <span class="hljs-comment">//ç±»å¤–å®ç°</span></span><br><span class="hljs-function"></span>&#123;<br>cout&lt;&lt;<span class="hljs-string">&quot;old_friends::visitæ­£åœ¨è®¿é—®ï¼š&quot;</span>&lt;&lt;b-&gt;m_sitting_room&lt;&lt;endl;<br><br>cout&lt;&lt;<span class="hljs-string">&quot;old_friends::visitæ­£åœ¨è®¿é—®ï¼š&quot;</span>&lt;&lt;b-&gt;m_bedroom&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">void old_friends::visit()</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">cout&lt;&lt;&quot;old_friends::visit_2æ­£åœ¨è®¿é—®ï¼š&quot;&lt;&lt;b-&gt;m_sitting_room&lt;&lt;endl;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">//cout&lt;&lt;&quot;old_friends::visit_2æ­£åœ¨è®¿é—®ï¼š&quot;&lt;&lt;b-&gt;m_bedroom&lt;&lt;endl;  //err!!! éæœ‹å‹å‡½æ•°ï¼Œä¸å¯è®¿é—®ç§æœ‰å±æ€§</span><br><span class="hljs-comment">&#125;     */</span><br><br><span class="hljs-comment">//.....................................</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>old_friends f; <span class="hljs-comment">//old_friendsç±» å®ä¾‹åŒ–ï¼Œå¹¶è°ƒç”¨æ„é€ å‡½æ•°</span><br>f.<span class="hljs-built_in">visit</span>();<br>    <span class="hljs-comment">//f.visit_2();</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-5-è¿ç®—ç¬¦é‡è½½"><a href="#4-5-è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5 è¿ç®—ç¬¦é‡è½½"></a>4.5 è¿ç®—ç¬¦é‡è½½</h3><p>è¿ç®—ç¬¦é‡è½½æ¦‚å¿µï¼š<br>å¯¹äºå†…ç½®æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨çŸ¥é“å¦‚ä½•è¿›è¡Œè¿ç®—ï¼Œä½†æ˜¯å¯¹äºè‡ªå®šä¹‰çš„åˆ™ä¸çŸ¥é“ã€‚ å¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ï¼ˆå¦‚å°†è‡ªå®šä¹‰çš„ç±»å‹è¿›è¡Œè¿ç®—ï¼‰ã€‚</p><h4 id="4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½"><a href="#4-5-1-åŠ å·è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½"></a>4.5.1 åŠ å·è¿ç®—ç¬¦é‡è½½</h4><p>ä½œç”¨ï¼šå®ç°ä¸¤ä¸ªè‡ªå®šä¹‰æ•°æ®ç±»å‹ç›¸åŠ çš„è¿ç®—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">//å®ç°è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ç›¸åŠ </span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">num</span><span class="hljs-comment">//è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_a;<br><span class="hljs-type">int</span> m_b;<br>    <span class="hljs-comment">//1 é€šè¿‡è‡ªå®šä¹‰æˆå‘˜å‡½æ•°å®ç°åŠ å·é‡è½½</span><br>    num <span class="hljs-keyword">operator</span>+(num &amp;n)  <br>    &#123;<br>        num tmp;<br>        tmp.m_a=<span class="hljs-keyword">this</span>-&gt;m_a+n.m_a;<br>        tmp.m_b=<span class="hljs-keyword">this</span>-&gt;m_b+n.m_b;<br>        <span class="hljs-keyword">return</span> tmp;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//å®ç°n1+n2</span><br>num n1,n2; <br>n1.m_a=<span class="hljs-number">12</span>,n1,m_b=<span class="hljs-number">13</span>;<br>n2.m_a=<span class="hljs-number">14</span>,n2,m_b=<span class="hljs-number">15</span>;<br><br><br>num n3=n1.<span class="hljs-keyword">operator</span>+(n2);<span class="hljs-comment">//è°ƒç”¨</span><br>num n4=n1+n2;    <span class="hljs-comment">//ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ +</span><br><br><br><span class="hljs-comment">//2 å…¨å±€å‡½æ•°å®ç°åŠ å·é‡è½½ ç±»ä¼¼æˆå‘˜å‡½æ•°ï¼Œå‡½æ•°åå–ä¸º operator+å°±ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ +   ï¼ˆå®ç°çœç•¥...)</span><br><br><br><span class="hljs-comment">// æœ¬è´¨å°±æ˜¯å‡½æ•°çš„é‡è½½ï¼Œåªä¸è¿‡å°†å‡½æ•°åå–ä¸ºoperator+å°±å¯ä»¥ç›´æ¥ç®€åŒ–æˆç”¨åŠ å·ä»£æ›¿ï¼Œè€Œä¸éœ€è¦å†™æˆå‡½æ•°è°ƒç”¨çš„å½¢å¼</span><br><br><br><span class="hljs-comment">//æ€»ç»“1ï¼šå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„ï¼Œä¾‹å¦‚1+1=2 ä¸èƒ½ç”¨é‡è½½å»å˜æˆ1+1=3</span><br><span class="hljs-comment">//æ€»ç»“2ï¼šä¸è¦æ»¥ç”¨è¿ç®—ç¬¦é‡è½½</span><br><br></code></pre></td></tr></table></figure><h4 id="4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½"><a href="#4-5-2-å·¦ç§»è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½"></a>4.5.2 å·¦ç§»è¿ç®—ç¬¦é‡è½½</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">num</span><span class="hljs-comment">//è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br><span class="hljs-type">int</span> m_a;<br><span class="hljs-type">int</span> m_b;<br>    <span class="hljs-comment">//1 é€šè¿‡è‡ªå®šä¹‰æˆå‘˜å‡½æ•°å®ç° &lt;&lt; é‡è½½</span><br>    <span class="hljs-comment">/*num operator&lt;&lt;(num &amp;n)  </span><br><span class="hljs-comment">    &#123;//è¿™æ ·åšåªèƒ½ç®€åŒ–ä¸º n&lt;&lt;cout è€Œä¸æ˜¯cout&lt;&lt;n,æ‰€ä»¥æˆå‘˜å‡½æ•°æ— æ³•å®ç°</span><br><span class="hljs-comment">        num tmp;</span><br><span class="hljs-comment">        tmp.m_a=this-&gt;m_a+n.m_a;</span><br><span class="hljs-comment">        tmp.m_b=this-&gt;m_b+n.m_b;</span><br><span class="hljs-comment">        return tmp;</span><br><span class="hljs-comment">    &#125;*/</span><br>&#125;<br><br><span class="hljs-comment">//2 é€šè¿‡å…¨å±€å‡½æ•°å®ç°</span><br><br><span class="hljs-comment">//æ¥å—çš„coutå¯¹è±¡å±äºostream(è¾“å‡ºæµ)ç±»å‹ ï¼Œæ‰€ä»¥è¿”å›è¾“å‡ºçš„å†…å®¹ä¹Ÿè¦æŠŠè¿”å›ç±»å‹è®¾ç½®ä¸ºè¯¥ç±»å‹</span><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream &amp;out,num &amp;n)<br>&#123;<br><span class="hljs-comment">//æœ¬è´¨ï¼šå‡½æ•°è°ƒç”¨ operator&lt;&lt;(cout,p) ---- ç®€åŒ–ä¸ºcout&lt;&lt;p;</span><br>cout&lt;&lt;<span class="hljs-string">&quot;m_a=&quot;</span>&lt;&lt;n.m_a&lt;&lt;<span class="hljs-string">&quot;m_b=&quot;</span>&lt;&lt;n.m_b;<br><br><span class="hljs-keyword">return</span> out;<span class="hljs-comment">//æ­¤å¤„è¿”å›outæ˜¯ä¸ºäº†å®ç°é“¾å¼è°ƒç”¨ å¦‚&quot;&lt;&lt;endl&quot;è¿™ä¸€æ­¥</span><br>&#125;<br><br><br>num n1.m_a=<span class="hljs-number">11</span>,n1.m_b=<span class="hljs-number">23</span>;<br><span class="hljs-comment">//æœ€ç»ˆå®ç°è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„è¾“å‡ºæ“ä½œ</span><br>cout&lt;&lt;n1;<br><br><br></code></pre></td></tr></table></figure><h4 id="4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½"><a href="#4-5-3-é€’å¢è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½"></a>4.5.3 é€’å¢è¿ç®—ç¬¦é‡è½½</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">my_int</span><br>&#123;<br>    <span class="hljs-comment">//å‹å…ƒ å®ç°å·¦ç§»è¿ç®—ç¬¦çš„é‡è½½</span><br>    <span class="hljs-keyword">friend</span> ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; cout, my_int a);<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">my_int</span>()<br>    &#123;<br>        m_num = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡è½½ å‰ç½®++</span><br>    <span class="hljs-comment">//è¿”å›å€¼ä¸ºå¼•ç”¨ç±»å‹ï¼Œä¾¿äºå¤šæ¬¡æ“ä½œ</span><br>    my_int&amp; <span class="hljs-keyword">operator</span>++()<br>    &#123;<br>        <span class="hljs-comment">//å…ˆè‡ªå¢ï¼Œåœ¨è¿”å›è‡ªèº«</span><br>        m_num++;<br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡è½½ åç½®++</span><br>    <span class="hljs-comment">//åç½®++é‡è½½åªèƒ½è¿”å› my_intï¼Œä¸èƒ½è¿”å›å¼•ç”¨ï¼Œå› ä¸ºtmpæ˜¯å±€éƒ¨å˜é‡ï¼Œ</span><br>    my_int <span class="hljs-keyword">operator</span>++(<span class="hljs-type">int</span>) <span class="hljs-comment">//åŠ ä¸Šå ä½å‚æ•°intæ˜¯ä¸ºäº†åŒºåˆ†å‰ç½®++å’Œåç½®++</span><br>    &#123;<br>        my_int tmp = *<span class="hljs-keyword">this</span>; <span class="hljs-comment">//è®°å½•å½“å‰çš„å€¼</span><br>        m_num++;<br>        <span class="hljs-keyword">return</span> tmp;         <span class="hljs-comment">//è¿”å›é€’å¢å‰çš„å€¼</span><br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_num;<br><br>&#125;;<br><br><br><span class="hljs-comment">// å·¦ç§»è¿ç®—ç¬¦çš„é‡è½½</span><br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; cout,my_int a)<br>&#123;<br>    cout &lt;&lt; a.m_num;<br>    <span class="hljs-keyword">return</span> cout;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    my_int a;<br>    <br>    cout &lt;&lt; a++ &lt;&lt; endl;    <span class="hljs-comment">//0</span><br>    cout &lt;&lt; a &lt;&lt; endl;      <span class="hljs-comment">//1</span><br><br>    cout &lt;&lt; ++a &lt;&lt; endl;    <span class="hljs-comment">//2</span><br>    cout &lt;&lt; a &lt;&lt; endl;      <span class="hljs-comment">//2</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h4 id="4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½"><a href="#4-5-4-èµ‹å€¼è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½"></a>4.5.4 èµ‹å€¼è¿ç®—ç¬¦é‡è½½</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">int</span> age)<span class="hljs-comment">//æ„é€ å‡½æ•°</span><br>    &#123;<br>        m_Age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span> (age);<br>    &#125;<br><br>    ~<span class="hljs-built_in">Person</span>()       <span class="hljs-comment">//ææ„å‡½æ•°</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (m_Age != <span class="hljs-literal">NULL</span>) &#123;<br>            <span class="hljs-keyword">delete</span> m_Age;<br>            m_Age = <span class="hljs-literal">NULL</span>;<br>        &#125;<br>    &#125;<br><br>    Person&amp; <span class="hljs-keyword">operator</span>=(Person&amp; p)<br>    &#123;<br>        <span class="hljs-comment">//ç¼–è¯‘å™¨æä¾›çš„æ˜¯æµ…æ‹·è´,å¦‚ä¸‹ï¼š</span><br>        <span class="hljs-comment">//m_Age = p.m_Age;</span><br><span class="hljs-comment">//å½“æ•°æ®åˆ›å»ºåœ¨å †åŒºæ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°é‡Šæ”¾å†…å­˜ï¼Œä½†æ˜¯å¦‚æœæ•°æ®è¢«æ‹·è´åï¼ˆæµ…æ‹·è´ä½¿å¾—äºŒè€…éƒ½æŒ‡å‘äº†åŒä¸€å—å†…å­˜ï¼‰ï¼Œå¦‚ ä¸‹é¢mainå‡½æ•°ä¸­p2=p1ã€‚ p1,p2é”€æ¯æ—¶ä¼šä¸¤æ¬¡é‡Šæ”¾åŒä¸€å—å†…å­˜ï¼Œå¯¼è‡´å‡ºé”™ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨æ·±æ‹·è´æ¥å®ç°</span><br><br>        <span class="hljs-comment">// å®é™…åº”è¯¥å…ˆé‡Šæ”¾åŸæ¥çš„ç©ºé—´ï¼Œç„¶åæ·±æ‹·è´</span><br>        <span class="hljs-keyword">if</span> (m_Age != <span class="hljs-literal">NULL</span>) &#123;<br>            <span class="hljs-keyword">delete</span> m_Age;<br>            m_Age = <span class="hljs-literal">NULL</span>;<br>        &#125;<br><br>        m_Age = <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(*p.m_Age);      <span class="hljs-comment">//é‡æ–°ç”³è¯·ä¸€å—ç©ºé—´å­˜æ”¾å€¼ï¼Œå¹¶æ‹·è´</span><br>        <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>    &#125;<br><br>    <span class="hljs-type">int</span>* m_Age;<br><br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-function">Person <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">20</span>)</span></span>;<br>    <span class="hljs-function">Person <span class="hljs-title">p3</span><span class="hljs-params">(<span class="hljs-number">30</span>)</span></span>;<br><br>    p3 = p2 = p1;       <span class="hljs-comment">//ç”¨é‡è½½åçš„èµ‹å€¼è¿ç®—ç¬¦</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;p1çš„å¹´é¾„æ˜¯&quot;</span> &lt;&lt; *p1.m_Age &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;p2çš„å¹´é¾„æ˜¯&quot;</span> &lt;&lt; *p2.m_Age &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;p3çš„å¹´é¾„æ˜¯&quot;</span> &lt;&lt; *p3.m_Age &lt;&lt; endl;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"><a href="#4-5-6-å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½" class="headerlink" title="4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½"></a>4.5.6 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦é‡è½½</h4><p>å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ï¼ˆï¼‰ä¹Ÿå¯ä»¥é‡è½½<br>ç”±äºé‡è½½åä½¿ç”¨çš„æ–¹å¼éå¸¸åƒå‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ç§°ä¸º<strong>ä»¿å‡½æ•°</strong><br>&#x3D;&#x3D;ä»¿å‡½æ•°æ²¡æœ‰å›ºå®šå†™æ³•ï¼Œéå¸¸çµæ´»&#x3D;&#x3D;</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">my_print</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(string str)</span>         <span class="hljs-comment">//æ— è¿”çš„ä»¿å‡½æ•°</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; str &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">my_add</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span>  <span class="hljs-comment">//æœ‰è¿”çš„ä»¿å‡½æ•°</span></span><br><span class="hljs-function">    </span>&#123;<br>        <span class="hljs-keyword">return</span> num1 + num2;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    my_print p1;<br>    <span class="hljs-built_in">p1</span>(<span class="hljs-string">&quot;hello world&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    my_add a1;<br>    <span class="hljs-type">int</span> res = <span class="hljs-built_in">a1</span>(<span class="hljs-number">12</span>, <span class="hljs-number">24</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;res= &quot;</span> &lt;&lt; res &lt;&lt; endl;<br><br>    <span class="hljs-comment">//åŒ¿åå¯¹è±¡è°ƒç”¨    ä¸å®ä¾‹åŒ–ï¼Œç›´æ¥ä½¿ç”¨ç±»çš„æ–¹æ³•</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;my_add()(100,200)= &quot;</span> &lt;&lt; <span class="hljs-built_in">my_add</span>()(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>) &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//test1();</span><br><br>    <span class="hljs-built_in">test2</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><h3 id="4-6-ç»§æ‰¿"><a href="#4-6-ç»§æ‰¿" class="headerlink" title="4.6 ç»§æ‰¿"></a>4.6 ç»§æ‰¿</h3><h4 id="4-6-1-åŸºæœ¬è¯­æ³•-ç»§æ‰¿æ–¹å¼"><a href="#4-6-1-åŸºæœ¬è¯­æ³•-ç»§æ‰¿æ–¹å¼" class="headerlink" title="4.6.1 åŸºæœ¬è¯­æ³• &amp; ç»§æ‰¿æ–¹å¼"></a>4.6.1 åŸºæœ¬è¯­æ³• &amp; ç»§æ‰¿æ–¹å¼</h4><p>ç»§æ‰¿çš„å¥½å¤„:å‡å°‘é‡å¤ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è¯­æ³•:    class A: public B</span><br><span class="hljs-comment">//Aç±»ç§°ä¸ºå­ç±» æˆ–æ´¾ç”Ÿç±»   B ç±»ç§°ä¸ºçˆ¶ç±» æˆ–åŸºç±» </span><br><br><span class="hljs-comment">//eg:</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">fa</span><br>&#123;<br><span class="hljs-comment">//....</span><br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">son</span> : <span class="hljs-keyword">public</span> fa<br>&#123;<br><span class="hljs-comment">//...</span><br>&#125;;<br><br><span class="hljs-comment">/////////////////////////////////</span><br><span class="hljs-comment">//ç»§æ‰¿æ–¹å¼æœ‰  å…¬å…±ç»§æ‰¿public  ä¿æŠ¤ç»§æ‰¿ protected   ç§æœ‰ç»§æ‰¿ private</span><br><span class="hljs-comment">//  ç§å¯†æƒé™ä½åˆ°é«˜ï¼š å…¬å…±--&gt;ä¿æŠ¤--&gt;ç§æœ‰</span><br><span class="hljs-comment">//  çˆ¶ç±»çš„ privateå±æ€§,ä¸è®ºä½•ç§ç»§æ‰¿æ–¹å¼ï¼Œå­ç±»éƒ½ä¸å¯è®¿é—®ï¼ï¼ï¼</span><br><span class="hljs-comment">//ç»§æ‰¿åªèƒ½è®©ç§å¯†æƒé™ä¸Šå‡ï¼Œè€Œä¸èƒ½é™çº§</span><br><span class="hljs-comment">//å¦‚ä»¥publicç»§æ‰¿çˆ¶ç±»ï¼Œpublicæ˜¯æœ€ä½ç§å¯†æƒé™ï¼Œæ‰€ä»¥çˆ¶ç±»å„å±æ€§åœ¨å­ç±»ä¸­ä¸å˜ï¼Œå¦‚æœä»¥protectedç»§æ‰¿ï¼Œåˆ™ä½äºprotectedéœ€è¦ä¸Šå‡ä¸ºprotectedï¼Œé«˜äºçš„åˆ™ä¸å˜ã€‚  </span><br><br><span class="hljs-comment">//å³ç»§æ‰¿æ–¹å¼è¡¨ç¤ºçˆ¶ç±»å„å±æ€§åœ¨å­ç±»ä¸­çš„ä¸Šå‡è‡³çš„æœ€ä½æƒé™ï¼ˆçˆ¶ç±»ä¸­ä½çš„è¦ä¸Šå‡ï¼Œé«˜çš„ä¸å˜ï¼‰ã€‚</span><br></code></pre></td></tr></table></figure><h4 id="4-6-2-ç»§æ‰¿æ¨¡å‹"><a href="#4-6-2-ç»§æ‰¿æ¨¡å‹" class="headerlink" title="4.6.2 ç»§æ‰¿æ¨¡å‹"></a>4.6.2 ç»§æ‰¿æ¨¡å‹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><br><span class="hljs-comment">//çˆ¶ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_a;<br><span class="hljs-keyword">protected</span>:<br>    <span class="hljs-type">int</span> m_b;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-type">int</span> m_c;<br>&#125;;<br><br><br><span class="hljs-comment">//å­ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_d;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Son s1;<br>    cout &lt;&lt; <span class="hljs-built_in">sizeof</span>(s1) &lt;&lt; endl;<span class="hljs-comment">//16</span><br>    <span class="hljs-comment">// çˆ¶ç±»ä¸­ç§æœ‰æˆå‘˜å±æ€§ æ˜¯è¢«ç¼–è¯‘å™¨ç»™éšè—äº†ï¼Œå› æ­¤æ˜¯è®¿é—®ä¸åˆ°ï¼Œä½†æ˜¯ç¡®å®è¢«ç»§æ‰¿ä¸‹å»äº†</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-6-3-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"><a href="#4-6-3-ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº" class="headerlink" title="4.6.3 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº"></a>4.6.3 ç»§æ‰¿ä¸­æ„é€ å’Œææ„é¡ºåº</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//çˆ¶ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Base</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Baseçš„æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    ~<span class="hljs-built_in">Base</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Baseçš„ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">//å­ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Son</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Sonçš„æ„é€ å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>    &#125;<br><br>    ~<span class="hljs-built_in">Son</span>()<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Sonçš„ææ„å‡½æ•°!&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//Base b1;</span><br><br>    Son s1;<br>    <span class="hljs-comment">//ç»“æœï¼š</span><br>    <span class="hljs-comment">/*Baseçš„æ„é€ å‡½æ•°!</span><br><span class="hljs-comment">    Sonçš„æ„é€ å‡½æ•°!</span><br><span class="hljs-comment">    Sonçš„ææ„å‡½æ•°!</span><br><span class="hljs-comment">    Baseçš„ææ„å‡½æ•°!*/</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test1</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//æ€»ç»“ï¼šç»§æ‰¿ä¸­ å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨å­ç±»æ„é€ å‡½æ•°ï¼Œææ„é¡ºåºä¸æ„é€ ç›¸å</span><br></code></pre></td></tr></table></figure><h4 id="4-6-4-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"><a href="#4-6-4-ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼" class="headerlink" title="4.6.4 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼"></a>4.6.4 ç»§æ‰¿åŒåæˆå‘˜å¤„ç†æ–¹å¼</h4><p>åœ¨å­ç±»ä¸­ è®¿é—®å­ç±»åŒåæˆå‘˜<strong>ç›´æ¥è®¿é—®</strong>å³å¯  ï¼Œè¦è®¿é—®çˆ¶ç±»åŒåæˆå‘˜å°±<strong>éœ€è¦åŠ ä½œç”¨åŸŸ</strong><br>å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼š è¯­æ³•ï¼š<br><code>class å­ç±» : ç»§æ‰¿æ–¹å¼ çˆ¶ç±»1 ,ç»§æ‰¿æ–¹å¼ çˆ¶ç±»2 ....</code><br>è®¿é—®åŒåæˆå‘˜æ—¶ä¹Ÿè¦åŒºåˆ†ä½œç”¨åŸŸï¼ï¼ï¼</p><p>é™æ€æˆå‘˜ä¸éé™æ€æˆå‘˜å¤„ç†æ–¹å¼ä¸€æ ·</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//çˆ¶ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_a;<br><br>    <span class="hljs-built_in">Base</span>()<br>    &#123;<br>        m_a = <span class="hljs-number">100</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//é‡è½½</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Base-func()çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> a)</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Base-func(int a)çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-comment">//å­ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Son</span> :<span class="hljs-keyword">public</span> Base<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_a;<br><br>    <span class="hljs-built_in">Son</span>()<br>    &#123;<br>        m_a = <span class="hljs-number">200</span>;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;Son-func()çš„è°ƒç”¨&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Son s;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Son.m_a= &quot;</span> &lt;&lt; s.m_a &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Base.m_a= &quot;</span> &lt;&lt; s.Base::m_a &lt;&lt; endl;<br><br>    <span class="hljs-comment">//å¦‚æœå­ç±»ä¸­å‡ºç°å’Œçˆ¶ç±»åŒåçš„æˆå‘˜å‡½æ•°,å­ç±»çš„åŒåæˆå‘˜ä¼šéšè—æ‰çˆ¶ç±»ä¸­æ‰€æœ‰åŒåæˆå‘˜å‡½æ•°,è¦åŠ ä½œç”¨åŸŸæ‰èƒ½è®¿é—®</span><br>    s.<span class="hljs-built_in">func</span>();<br>    s.Base::<span class="hljs-built_in">func</span>();<br>    s.Base::<span class="hljs-built_in">func</span>(<span class="hljs-number">10086</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test1</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="4-6-5-è±å½¢ç»§æ‰¿"><a href="#4-6-5-è±å½¢ç»§æ‰¿" class="headerlink" title="4.6.5 è±å½¢ç»§æ‰¿"></a>4.6.5 è±å½¢ç»§æ‰¿</h4><p>è±å½¢ç»§æ‰¿æ¦‚å¿µï¼šä¸¤ä¸ªæ´¾ç”Ÿç±»ç»§æ‰¿åŒä¸€ä¸ªåŸºç±»ï¼Œåˆæœ‰æŸä¸ªç±»åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ´¾ç”Ÿç±»ï¼Œè¿™ç§ç»§æ‰¿è¢«ç§°ä¸ºè±å½¢ç»§æ‰¿ï¼Œæˆ–è€…é’»çŸ³ç»§æ‰¿</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//é€šè¿‡ VSå¼€å‘äººå‘˜æç¤ºå·¥å…·ï¼ˆDeveloper Command Prompt )æŸ¥çœ‹ç±»çš„ç»“æ„å’Œç»§æ‰¿å…³ç³»</span><br><span class="hljs-comment">// æ‰“å¼€å¼€å‘äººå‘˜æç¤ºå·¥å…·--&gt;åˆ‡æ¢ç›˜ç¬¦è‡³æ‰€éœ€æŸ¥çœ‹çš„é¡¹ç›®æ‰€åœ¨ç£ç›˜ --&gt; cd è¯¥é¡¹ç›®è·¯å¾„ --&gt; cl /d1 reportSingleClassLayoutç±»å &quot;æºæ–‡ä»¶å&quot;--&gt;å›è½¦å³å¯</span><br><br><br><span class="hljs-comment">//åŠ¨ç‰©ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> m_Age;<br>&#125;;<br><br><span class="hljs-comment">//åˆ©ç”¨ è™šç»§æ‰¿-- virtualï¼ˆç»§æ‰¿çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆè€Œéçˆ¶ç±»æœ¬ä½“ï¼‰</span><br><span class="hljs-comment">//ç‹®å­ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Lion</span> :<span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal&#123;&#125;;<br><br><br><span class="hljs-comment">//è™ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tiger</span> :<span class="hljs-keyword">virtual</span> <span class="hljs-keyword">public</span> Animal &#123;&#125;;<br><br><span class="hljs-comment">//ç‹®è™å…½ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Liger</span>:<span class="hljs-keyword">public</span> Lion,<span class="hljs-keyword">public</span> Tiger&#123;&#125;;<br><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Liger liger1;<br>    <br>    <span class="hljs-comment">//è±å½¢ç»§æ‰¿ç›´æ¥ç»§æ‰¿å¯¼è‡´æ•°æ®æœ‰ä¸¤ä»½, èµ„æºæµªè´¹,å¯åˆ©ç”¨è™šç»§æ‰¿è§£å†³</span><br>    liger1.Lion::m_Age = <span class="hljs-number">20</span>;<br>    liger1.Tiger::m_Age = <span class="hljs-number">21</span>;<br><br>    <span class="hljs-comment">//ç”±äºæ•°æ®åªæœ‰ä¸€ä»½ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆäºŒä¹‰æ€§ï¼Œè®¿é—®çš„éƒ½æ˜¯åŒä¸€ä»½æ•°æ®</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Liger--m_Age= &quot;</span> &lt;&lt; liger1.m_Age &lt;&lt; endl;           <span class="hljs-comment">//21</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Lion--m_Age= &quot;</span> &lt;&lt; liger1.Lion::m_Age &lt;&lt; endl;      <span class="hljs-comment">//21</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;Tiger--m_Age= &quot;</span> &lt;&lt; liger1.Tiger::m_Age &lt;&lt; endl;    <span class="hljs-comment">//21</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">test1</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/26/xTQfL6v1drP9VKO.png" alt="virtual_.png"></p><h3 id="4-7-å¤šæ€"><a href="#4-7-å¤šæ€" class="headerlink" title="4.7 å¤šæ€"></a>4.7 å¤šæ€</h3><h4 id="4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ"><a href="#4-7-1-å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ"></a>4.7.1 å¤šæ€çš„åŸºæœ¬æ¦‚å¿µ</h4><p>å¤šæ€åˆ†ä¸ºä¸¤ç±»<br>é™æ€å¤šæ€ï¼šå‡½æ•°é‡è½½å’Œè¿ç®—ç¬¦é‡è½½å±äº<strong>é™æ€å¤šæ€</strong>,å¤ç”¨å‡½æ•°å<br>åŠ¨æ€å¤šæ€ï¼šæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€<br>åŒºåˆ«ï¼š<br>é™æ€å¤šæ€çš„å‡½æ•°åœ°å€æ—©ç»‘å®š-ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€<br>åŠ¨æ€å¤šæ€çš„å‡½æ•°åœ°å€æ™šç»‘å®š-è¿è¡Œé˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// è™šå‡½æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;åŠ¨ç‰©åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> :<span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">speak</span><span class="hljs-params">()</span>    <span class="hljs-comment">// å­ç±»é‡å†™çˆ¶ç±»è™šå‡½æ•°æ—¶å¯ä»¥åŠ virtualä¹Ÿå¯ä¸åŠ </span></span><br><span class="hljs-function">    </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å°çŒ«åœ¨è¯´è¯&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> :<span class="hljs-keyword">public</span> Animal<br>&#123;<br><span class="hljs-keyword">public</span>:<br>&#125;;<br><br><br><span class="hljs-comment">//åœ°å€æ—©ç»‘å®š åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šå‡½æ•°åœ°å€</span><br><span class="hljs-comment">//å¦‚æœæƒ³æ‰§è¡Œè®©çŒ«è¯´è¯, é‚£ä¹ˆè¿™ä¸ªå‡½æ•°åœ°å€å°±ä¸èƒ½æå‰ç»‘å®š, éœ€è¦åœ¨è¿è¡Œé˜¶æ®µè¿›è¡Œç»‘å®š(åœ°å€æ™šç»‘å®š)</span><br><br><span class="hljs-comment">//åŠ¨æ€å¤šæ€æ»¡è¶³æ¡ä»¶</span><br><span class="hljs-comment">//1ã€æœ‰ç»§æ‰¿å…³ç³»</span><br><span class="hljs-comment">//2ã€å­ç±»é‡å†™çˆ¶ç±»çš„è™šå‡½æ•°  ï¼ˆé‡å†™ï¼šå‡½æ•°å‘½ï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›ç±»å‹å®Œå…¨ä¸€æ ·ï¼‰</span><br><br><span class="hljs-comment">//åŠ¨æ€å¤šæ€ä½¿ç”¨ï¼š</span><br><span class="hljs-comment">//çˆ¶ç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨ æ‰§è¡Œå­ç±»å¯¹è±¡</span><br><br><br><br><span class="hljs-comment">//çˆ¶ç±»çš„å¼•ç”¨å¯ç›´æ¥æŒ‡å‘å­ç±»çš„å¯¹è±¡,ä¸éœ€è¦ç±»å‹è½¬æ¢</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">doSpeak</span><span class="hljs-params">(Animal &amp;animal)</span>    <span class="hljs-comment">//Animal &amp; animal =cat;</span></span><br><span class="hljs-function"></span>&#123;<br>    animal.<span class="hljs-built_in">speak</span>();<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <br>    Cat cat;<br>    <span class="hljs-built_in">doSpeak</span>(cat);              <span class="hljs-comment">//å°çŒ«åœ¨è¯´è¯</span><br><br>    Dog dog;<br>    <span class="hljs-built_in">doSpeak</span>(dog);              <span class="hljs-comment">//åŠ¨ç‰©åœ¨è¯´è¯</span><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>Animal ç±»<br><strong>vfptrè¡¨ç¤ºè™šæ‹Ÿå‡½æ•°æŒ‡é’ˆ</strong> æŒ‡å‘ vftabï¼ˆè™šæ‹Ÿå‡½æ•°è¡¨ï¼‰ä¸­çš„å‡½æ•°<br>ï¼ˆsizeç­‰äº4æ˜¯å› ä¸ºæŒ‡é’ˆçš„å¤§å°ä¸º4ï¼‰</p><p><img src="https://s2.loli.net/2023/02/27/U6NF1XZcYJbxr2M.png" alt="image.png"></p><p>Dog ç±»ï¼Œæ²¡æœ‰å‘ç”Ÿspeakå‡½æ•°é‡å†™ï¼Œæ‰€ä»¥vftabä¸­çš„å‡½æ•°æ˜¯Animalç±»çš„speakå‡½æ•°</p><p><img src="https://s2.loli.net/2023/02/27/82qv1AHUdk5WEuT.png" alt="image.png"></p><p>Cat ç±»ï¼Œå‘ç”Ÿspeakå‡½æ•°é‡å†™ï¼Œvftabä¸­çš„å‡½æ•°æ˜¯Catç±»çš„speakå‡½æ•°ï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯  å°çŒ«åœ¨è¯´è¯</p><p><img src="https://s2.loli.net/2023/02/27/Pf8OGMcoyEx1NLZ.png" alt="image.png"></p><h4 id="4-7-2-å¤šæ€æ¡ˆä¾‹â€”-è®¡ç®—å™¨ç±»"><a href="#4-7-2-å¤šæ€æ¡ˆä¾‹â€”-è®¡ç®—å™¨ç±»" class="headerlink" title="4.7.2 å¤šæ€æ¡ˆä¾‹â€”-è®¡ç®—å™¨ç±»"></a>4.7.2 å¤šæ€æ¡ˆä¾‹â€”-è®¡ç®—å™¨ç±»</h4><p>å¤šæ€çš„ä¼˜ç‚¹ï¼š<br>ä»£ç ç»„ç»‡ç»“æ„æ¸…æ™°<br>å¯è¯»æ€§å¼º<br>åˆ©äºå‰æœŸå’ŒåæœŸçš„æ‰©å±•ä»¥åŠç»´æŠ¤ </p><p>åœ¨çœŸå®å¼€å‘ä¸­ æå€¡ &#x3D;&#x3D;å¼€é—­åŸåˆ™&#x3D;&#x3D; ï¼š<strong>å¯¹æ‰©å±•è¿›è¡Œå¼€å‘,å¯¹ä¿®æ”¹è¿›è¡Œå…³é—­</strong></p>]]></content>
    
    
    <categories>
      
      <category>private-page</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç§å¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ginå­¦ä¹ è®°å½•-è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</title>
    <link href="/2023/08/05/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF/"/>
    <url>/2023/08/05/gin%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯"><a href="#è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯"></a>è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</h2><p>å½“æ ¡éªŒé”™è¯¯æ—¶ï¼Œæ ¹æ®è¿”å›çš„é”™è¯¯ä¿¡æ¯è‡ªå®šä¹‰ä¸€ä¸ªé”™è¯¯æç¤ºè¿”å›ç»™å‰ç«¯é¡µé¢ï¼Œæ–¹ä¾¿å¤„ç†ã€‚</p><span id="more"></span><hr><h3 id="å®šä¹‰éœ€è¦ç”¨åˆ°çš„ç»“æ„ä½“"><a href="#å®šä¹‰éœ€è¦ç”¨åˆ°çš„ç»“æ„ä½“" class="headerlink" title="å®šä¹‰éœ€è¦ç”¨åˆ°çš„ç»“æ„ä½“"></a>å®šä¹‰éœ€è¦ç”¨åˆ°çš„ç»“æ„ä½“</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> SignUserInfo <span class="hljs-keyword">struct</span> &#123;<br><span class="hljs-comment">// æ·»åŠ éªŒè¯å™¨ å¸¸ç”¨çš„</span><br>Name <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;name&quot; binding:&quot;required&quot; msg:&quot;æ˜µç§°ä¸èƒ½ä¸ºç©º&quot;`</span>    <span class="hljs-comment">// ç”¨æˆ·å</span><br>Age  <span class="hljs-type">int</span>    <span class="hljs-string">`json:&quot;age&quot; binding:&quot;lt=100,gt=0&quot; msg:&quot;å¹´é¾„ä¸ç¬¦åˆè¦æ±‚&quot;`</span> <span class="hljs-comment">// å¹´é¾„</span><br>&#125;   <br></code></pre></td></tr></table></figure><hr><h3 id="å°è£…æˆç‹¬ç«‹çš„å‡½æ•°"><a href="#å°è£…æˆç‹¬ç«‹çš„å‡½æ•°" class="headerlink" title="å°è£…æˆç‹¬ç«‹çš„å‡½æ•°"></a>å°è£…æˆç‹¬ç«‹çš„å‡½æ•°</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetValidMsg</span><span class="hljs-params">(err <span class="hljs-type">error</span>, user SignUserInfo)</span></span> <span class="hljs-type">string</span> &#123;<br><span class="hljs-comment">// å°†erræ¥å£æ–­è¨€ä¸ºå…·ä½“ç±»å‹</span><br><span class="hljs-keyword">if</span> errs, ok := err.(validator.ValidationErrors); ok &#123;<br>getObj := reflect.TypeOf(&amp;user)<br>fmt.Println(<span class="hljs-string">&quot;ç±»å‹ä¸ºï¼š&quot;</span>, getObj)<br><br><span class="hljs-comment">// æ–­è¨€æˆåŠŸ</span><br><span class="hljs-keyword">for</span> _, e := <span class="hljs-keyword">range</span> errs &#123; <span class="hljs-comment">// éå†æ¯ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ æŠ¥é”™ä¿¡æ¯å¯èƒ½æœ‰å¤šä¸ª</span><br><span class="hljs-comment">// æ ¹æ®æŠ¥é”™å­—æ®µåï¼Œè·å–ç»“æ„ä½“çš„å…·ä½“å­—æ®µ</span><br><span class="hljs-keyword">if</span> f, exits := getObj.Elem().FieldByName(e.Field()); exits &#123;<br>msg := f.Tag.Get(<span class="hljs-string">&quot;msg&quot;</span>)<br>fmt.Println(msg)<br><span class="hljs-keyword">return</span> msg<br>&#125; f f, exits := getObj.Elem().FieldByName(e.Field()); exits &#123;<br>msg := f.Tag.Get(<span class="hljs-string">&quot;msg&quot;</span>)<br>fmt.Println(msg)<br><span class="hljs-keyword">return</span> msg<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span> <span class="hljs-comment">// æ²¡æœ‰æ£€æŸ¥åˆ°éªŒè¯å™¨é”™è¯¯åˆ™è¿”å›ç©º</span><br>&#125;<br></code></pre></td></tr></table></figure><p><code>validator.ValidationErrors</code> æ˜¯ä¸€ä¸ªé”™è¯¯ç±»å‹ï¼Œç”¨äºå­˜å‚¨éªŒè¯å™¨éªŒè¯å¤±è´¥çš„é”™è¯¯ä¿¡æ¯ <code>err.(validator.ValidationErrors)</code> è¡¨ç¤º<br>å°† <code>err</code> è½¬æ¢ä¸º <code>validator.ValidationErrors</code> ç±»å‹ã€‚å¦‚æœ <code>err</code> æ˜¯ <code>validator.ValidationErrors</code> ç±»å‹æˆ–è€…å®ƒçš„æŒ‡é’ˆç±»å‹ï¼Œåˆ™ç±»å‹æ–­è¨€ä¼šè¿”å›è½¬æ¢åçš„ <code>validator.ValidationErrors</code>ç±»å‹çš„å€¼å’Œ <code>true</code>ã€‚å¦‚æœ <code>err</code> ä¸æ˜¯ <code>validator.ValidationErrors</code>ç±»å‹æˆ–è€…å®ƒçš„æŒ‡é’ˆç±»å‹ï¼Œåˆ™ç±»å‹æ–­è¨€ä¼šè¿”å› <code>validator.ValidationErrors</code>ç±»å‹çš„é›¶å€¼å’Œ <code>false</code>ã€‚ </p><p>é€šè¿‡ <code>getObj.Elem()</code> è·å–ç»“æ„ä½“çš„å…ƒç´ ç±»å‹ï¼Œå› ä¸º <code>getObj</code> æ˜¯ç»“æ„ä½“æŒ‡é’ˆç±»å‹çš„åå°„å¯¹è±¡ï¼Œ<br>ä½¿ç”¨ <code>Elem()</code> æ–¹æ³•å¯ä»¥è·å–æŒ‡é’ˆæŒ‡å‘çš„å®é™…ç»“æ„ä½“ç±»å‹ã€‚<br>ç„¶åï¼Œä½¿ç”¨ <code>FieldByName()</code> æ–¹æ³•æ ¹æ®é”™è¯¯å­—æ®µå <code>e.Field()</code> æŸ¥æ‰¾ç»“æ„ä½“ä¸­å¯¹åº”çš„å­—æ®µã€‚<br>å¦‚æœå­—æ®µå­˜åœ¨ï¼Œ <code>f</code> å°±æ˜¯ä¸€ä¸ªåŒ…å«è¯¥å­—æ®µä¿¡æ¯çš„åå°„å¯¹è±¡ï¼Œå¹¶ä¸” <code>exits</code> ä¸º <code>true</code> ã€‚å¦‚æœå­—æ®µä¸å­˜åœ¨ï¼Œ<br><code>f</code> å°†æ˜¯é›¶å€¼çš„åå°„å¯¹è±¡ï¼Œå¹¶ä¸” <code>exits</code> ä¸º <code>false</code> ã€‚</p><hr><h3 id="mainå‡½æ•°"><a href="#mainå‡½æ•°" class="headerlink" title="mainå‡½æ•°"></a>mainå‡½æ•°</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>router := gin.Default()<br><br>router.POST(<span class="hljs-string">&quot;/check&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;è®¿é—®...&quot;</span>)<br><span class="hljs-keyword">var</span> user SignUserInfo<br>err := c.ShouldBindJSON(&amp;user) <span class="hljs-comment">// è¿”å›errorä¿¡æ¯ï¼Œä¸æŠ¥é”™åˆ™è¿”å›ç©º</span><br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><br>customErr := GetValidMsg(err, user) <span class="hljs-comment">// è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯</span><br><br>c.JSON(http.StatusBadRequest, gin.H&#123;<span class="hljs-string">&quot;msg&quot;</span>: customErr&#125;)<br><br><span class="hljs-keyword">return</span><br>&#125;<br><br>c.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;data&quot;</span>: user&#125;)<br>&#125;)<br><br>err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆªå›¾å¦‚ä¸‹ï¼š<br><img src="https://s2.loli.net/2023/08/05/RMEKjNrvoHPy1kf.png" alt="æ ¡éªŒå¤±è´¥è¿”å›è‡ªå®šä¹‰çš„é”™è¯¯ä¿¡æ¯"></p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>å­¦ä¹ è¿™ä¸€èŠ‚çš„æ—¶å€™çœ‹ä¸æ‡‚ï¼Œçœ‹æºç ä¹Ÿçœ‹ä¸æ˜ç™½ï¼Œè¿™ä¸ªæ—¶å€™æœ€å¯é çš„å°±æ˜¯chatGPTäº†ï¼Œå…¨éƒ¨ä»£ç å¤åˆ¶ç²˜è´´å‘ç»™ä»–ï¼Œç„¶åè®©ä»–ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°è§£é‡Šï¼ŒçœŸæ˜¯å¤ªæ£’äº†ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>go</tag>
      
      <tag>gin</tag>
      
      <tag>å­¦ä¹ è®°å½•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ginå­¦ä¹ è®°å½•-å››å¤§è¯·æ±‚æ–¹å¼</title>
    <link href="/2023/08/04/gin-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E5%9B%9B%E5%A4%A7%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/"/>
    <url>/2023/08/04/gin-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95-%E5%9B%9B%E5%A4%A7%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p><img src="https://s2.loli.net/2023/08/04/8BK3UqZutdebsgR.png" alt="è¾‰å¤œé…±"></p><h1 id="ä»¥æ–‡å­—èµ„æºä¸ºä¾‹å­¦ä¹ å››å¤§è¯·æ±‚æ–¹å¼"><a href="#ä»¥æ–‡å­—èµ„æºä¸ºä¾‹å­¦ä¹ å››å¤§è¯·æ±‚æ–¹å¼" class="headerlink" title="ä»¥æ–‡å­—èµ„æºä¸ºä¾‹å­¦ä¹ å››å¤§è¯·æ±‚æ–¹å¼"></a>ä»¥æ–‡å­—èµ„æºä¸ºä¾‹å­¦ä¹ å››å¤§è¯·æ±‚æ–¹å¼</h1><span id="more"></span><p>GET:ä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰<br>POST:åœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æº<br>PUT:åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›å®Œæ•´èµ„æºæ•°æ®)<br>PATCH:åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æº(å®¢æˆ·ç«¯æä¾›éœ€è¦ä¿®æ”¹çš„èµ„æºæ•°æ®)<br>DELETE:ä»æœåŠ¡å™¨åˆ é™¤èµ„æº</p><blockquote><p>å¥½åƒæ˜¯äº”å¤§è¯·æ±‚æ–¹å¼â€¦ ä¸è¿‡æ²¡æœ‰ç”¨åˆ°PATCH</p></blockquote><ul><li>ä»¥æ–‡å­—èµ„æºä¸ºä¾‹  åˆ†åˆ«<strong>å¯¹åº”å¢åˆ æ”¹æŸ¥</strong></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">è¯·æ±‚æ–¹å¼     è¯·æ±‚å†…å®¹             è¯´æ˜<br>GET/articles æ–‡ç« åˆ—è¡¨<br>GET /articles/:id æ–‡ç« è¯¦æƒ…<br>POST /articles æ·»åŠ æ–‡ç« <br>PUT /articles/:id ä¿®æ”¹æŸä¸€ç¯‡æ–‡ç« <br>DELETE /articles/:idåˆ é™¤æŸä¸€ç¯‡æ–‡ç« <br></code></pre></td></tr></table></figure><hr><h2 id="å¯¼å…¥ç›¸åº”çš„åŒ…"><a href="#å¯¼å…¥ç›¸åº”çš„åŒ…" class="headerlink" title="å¯¼å…¥ç›¸åº”çš„åŒ…"></a>å¯¼å…¥ç›¸åº”çš„åŒ…</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;encoding/json&quot;</span><br><span class="hljs-string">&quot;fmt&quot;</span><br><span class="hljs-string">&quot;github.com/gin-gonic/gin&quot;</span><br><span class="hljs-string">&quot;net/http&quot;</span><br>)<br></code></pre></td></tr></table></figure><hr><h2 id="è‡ªå®šä¹‰éœ€è¦çš„ç»“æ„ä½“"><a href="#è‡ªå®šä¹‰éœ€è¦çš„ç»“æ„ä½“" class="headerlink" title="è‡ªå®šä¹‰éœ€è¦çš„ç»“æ„ä½“"></a>è‡ªå®šä¹‰éœ€è¦çš„ç»“æ„ä½“</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// ArticleModel æ–‡ç« æ ¼å¼  ç®€å•å†™</span><br><span class="hljs-keyword">type</span> ArticleModel <span class="hljs-keyword">struct</span> &#123;<br>Title   <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;title&quot;`</span><br>Content <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;content&quot;`</span><br>&#125;<br><br><span class="hljs-comment">// å°è£…å“åº”æ ¼å¼</span><br><span class="hljs-keyword">type</span> Response <span class="hljs-keyword">struct</span> &#123;<br>Code    <span class="hljs-type">int</span>    <span class="hljs-string">`json:&quot;code&quot;`</span><br>Date    any    <span class="hljs-string">`json:&quot;date&quot;`</span><br>Message <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;msg&quot;`</span><br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="æ–‡ç« åˆ—è¡¨"><a href="#æ–‡ç« åˆ—è¡¨" class="headerlink" title="æ–‡ç« åˆ—è¡¨"></a>æ–‡ç« åˆ—è¡¨</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">getList</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;<br>list := []ArticleModel&#123;<br>&#123;<span class="hljs-string">&quot;goè¯­è¨€å…¥é—¨&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ˜¯goè¯­è¨€å…¥é—¨åŸºç¡€&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;cè¯­è¨€å…¥é—¨åˆ°å…¥åœŸ&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ˜¯cè¯­è¨€å…¥é—¨æ•™ç¨‹,é¢å‘å…¥åœŸ&quot;</span>&#125;,<br>&#123;<span class="hljs-string">&quot;æ•°æ®åº“ä»åˆ åº“åˆ°è·‘è·¯&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ•™ä½ å¦‚ä½•ä»åˆ åº“åˆ°è·‘è·¯&quot;</span>&#125;,<br>&#125;<br><span class="hljs-comment">// è¿”å›çš„Responseçš„codeæ˜¯éšä¾¿å†™çš„ï¼Œå®é™…åº”è¯¥å®šä¹‰ä¸€äº›æœ‰æ„ä¹‰çš„å“åº”ç </span><br>arg.JSON(<span class="hljs-number">200</span>, Response&#123;http.StatusOK, list, <span class="hljs-string">&quot;å“åº”æˆåŠŸ&quot;</span>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>postmanå“åº”æˆªå›¾ï¼š<br><img src="https://s2.loli.net/2023/08/03/dRHYulPCcNWgEs7.png" alt="æ–‡ç« åˆ—è¡¨"></li></ul><hr><h2 id="æ–‡ç« è¯¦æƒ…"><a href="#æ–‡ç« è¯¦æƒ…" class="headerlink" title="æ–‡ç« è¯¦æƒ…"></a>æ–‡ç« è¯¦æƒ…</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">getDetails</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;<br><span class="hljs-comment">// ç®€å†™ å®é™…åº”æ ¹æ®è·å–çš„idåˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢</span><br>book_id := arg.Param(<span class="hljs-string">&quot;id&quot;</span>)<br>fmt.Printf(<span class="hljs-string">&quot;è·å–åˆ°id: %v\n&quot;</span>, book_id)<br><span class="hljs-comment">// æ­¤å¤„ç›´æ¥å¾—åˆ°æŸ¥è¯¢æ•°æ®åº“çš„ç»“æœ</span><br>article := ArticleModel&#123;<br><span class="hljs-string">&quot;cè¯­è¨€å…¥é—¨åˆ°å…¥åœŸ&quot;</span>, <span class="hljs-string">&quot;æœ¬ä¹¦æ˜¯cè¯­è¨€å…¥é—¨æ•™ç¨‹,é¢å‘å…¥åœŸ&quot;</span>,<br>&#125;<br><br>arg.JSON(http.StatusOK, gin.H&#123;<span class="hljs-string">&quot;id&quot;</span>: book_id, <span class="hljs-string">&quot;response&quot;</span>: Response&#123;http.StatusOK, article, <span class="hljs-string">&quot;å“åº”æˆåŠŸ&quot;</span>&#125;&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>postmanå“åº”æˆªå›¾ï¼š<br><img src="https://s2.loli.net/2023/08/03/dRHYulPCcNWgEs7.png" alt="æ–‡ç« è¯¦æƒ…"></li></ul><hr><h2 id="åˆ›å»ºæ–‡ç« -å’Œ-ä¿®æ”¹æ–‡ç« "><a href="#åˆ›å»ºæ–‡ç« -å’Œ-ä¿®æ”¹æ–‡ç« " class="headerlink" title="åˆ›å»ºæ–‡ç«  å’Œ ä¿®æ”¹æ–‡ç« "></a>åˆ›å»ºæ–‡ç«  å’Œ ä¿®æ”¹æ–‡ç« </h2><blockquote><p>è¿™ä¿©æ”¾ä¸€èµ·äº†ï¼Œå› ä¸ºç”¨åˆ°åŒä¸€ä¸ªå‡½æ•°</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// å°è£…çš„ä¸€ä¸ªå¤„ç†jsonæ•°æ®çš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">bindJson</span><span class="hljs-params">(arg *gin.Context, obj any)</span></span> (err <span class="hljs-type">error</span>) &#123;<br>body, _ := arg.GetRawData() <span class="hljs-comment">// è·å–åˆ°postä¼ çš„æ•°æ®</span><br><br>contentType := arg.GetHeader(<span class="hljs-string">&quot;Content-Type&quot;</span>)<br><br>fmt.Println(<span class="hljs-type">string</span>(contentType)) <span class="hljs-comment">// å†…å®¹ç±»å‹</span><br><span class="hljs-comment">// ç±»å‹ å¯¹åº”çš„ç»“æœ</span><br><span class="hljs-comment">// json:application/json</span><br><span class="hljs-comment">// from-data: multipart/form-data; boundary=--------------------------629880651178044255286053</span><br><span class="hljs-comment">// x-www-form-urlencoded:application/x-www-form-urlencoded</span><br><br><span class="hljs-comment">// æ ¹æ®ä»¥ä¸Šå¯ä»¥è¿™ä¹Ÿåˆ¤æ–­å¹¶è§£æjsonæ•°æ®  ä¸åŒç±»å‹çš„æ•°æ®ç”¨ä¸åŒçš„å¤„ç†æ–¹å¼</span><br><span class="hljs-keyword">switch</span> contentType &#123;<br><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;application/json&quot;</span>: <span class="hljs-comment">// ç®€å†™ï¼Œè¿™é‡Œå°±åªè§£æjsonæ•°æ®</span><br><br><span class="hljs-comment">// å°†postçš„æ•°æ®ååºåˆ—åŒ–è§£ææˆç»“æ„ä½“</span><br>err := json.Unmarshal(body, &amp;obj)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br><span class="hljs-keyword">return</span> err<br>&#125;<br><span class="hljs-keyword">default</span>:<br>fmt.Println(<span class="hljs-string">&quot;:D&quot;</span>)<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºæ–‡ç« </span><br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">post</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;<br><span class="hljs-keyword">var</span> article ArticleModel<br><br>err := _bindJson(arg, &amp;article)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br>arg.JSON(http.StatusOK, Response&#123;http.StatusOK, article, <span class="hljs-string">&quot;åˆ›å»ºæˆåŠŸ&quot;</span>&#125;)<br>&#125;<br><br><span class="hljs-comment">// ä¿®æ”¹æ–‡ç« </span><br><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">put</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;<br><span class="hljs-comment">// æ‹¿åˆ°id</span><br>fmt.Printf(<span class="hljs-string">&quot;è·å–åˆ°id: %v\n&quot;</span>, arg.Param(<span class="hljs-string">&quot;id&quot;</span>))<br><br><span class="hljs-keyword">var</span> article ArticleModel<br><span class="hljs-comment">// æ‹¿åˆ°ä¿®æ”¹åçš„æ–‡ç« å†…å®¹</span><br>err := _bindJson(arg, &amp;article)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-built_in">panic</span>(err)<br>&#125;<br><br>arg.JSON(<span class="hljs-number">200</span>, Response&#123;http.StatusOK, article, <span class="hljs-string">&quot;ä¿®æ”¹æˆåŠŸ&quot;</span>&#125;)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>postmanå“åº”æˆªå›¾ï¼š</p></li><li><p>åˆ›å»ºæ–‡ç« <br><img src="https://s2.loli.net/2023/08/03/s8zIogb6QUX7Cy4.png" alt="åˆ›å»ºæ–‡ç« "></p></li><li><p>ä¿®æ”¹æ–‡ç« </p></li><li><p><img src="https://s2.loli.net/2023/08/03/qhCy6NfoR2KBDGJ.png" alt="ä¿®æ”¹æ–‡ç« "></p></li></ul><hr><h2 id="åˆ é™¤æ–‡ç« "><a href="#åˆ é™¤æ–‡ç« " class="headerlink" title="åˆ é™¤æ–‡ç« "></a>åˆ é™¤æ–‡ç« </h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> _<span class="hljs-title">delete</span><span class="hljs-params">(arg *gin.Context)</span></span> &#123;<br><span class="hljs-comment">// æ‹¿åˆ°id</span><br>fmt.Printf(<span class="hljs-string">&quot;è·å–åˆ°id: %v\n&quot;</span>, arg.Param(<span class="hljs-string">&quot;id&quot;</span>))<br><span class="hljs-comment">// å®é™…ä¸­ æ‹¿åˆ°idç„¶åå»æ•°æ®åº“ä¸­æŸ¥æ‰¾ã€åˆ é™¤ ...</span><br><br>arg.JSON(<span class="hljs-number">200</span>, Response&#123;http.StatusOK, <span class="hljs-string">&quot;&quot;</span>, <span class="hljs-string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>&#125;)<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>postmanå“åº”æˆªå›¾ï¼š</li><li>åˆ é™¤æ–‡ç« <br><img src="https://s2.loli.net/2023/08/03/K9gy6LCsJivmb4N.png" alt="åˆ é™¤æ–‡ç« "></li></ul><blockquote><p>åˆ é™¤ååªéœ€è¦è¿”å›ä¸€ä¸ªåˆ é™¤æˆåŠŸçš„æç¤ºï¼Œæ²¡åˆ«çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å¾ˆç©ºï¼Œ&#x3D;&#x3D;å®é™…å¼€å‘è¿˜éœ€è¦å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œâ€¦&#x3D;&#x3D;</p></blockquote><hr><h2 id="mainå‡½æ•°"><a href="#mainå‡½æ•°" class="headerlink" title="mainå‡½æ•°"></a>mainå‡½æ•°</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>router := gin.Default()<br>router.GET(<span class="hljs-string">&quot;/articles/&quot;</span>, _getList)<br>router.GET(<span class="hljs-string">&quot;/articles/:id&quot;</span>, _getDetails)<br>router.POST(<span class="hljs-string">&quot;/articles/&quot;</span>, _post)<br>router.PUT(<span class="hljs-string">&quot;/articles/:id&quot;</span>, _put)<br>router.DELETE(<span class="hljs-string">&quot;/articles/:id&quot;</span>, _delete)<br><br>err := router.Run(<span class="hljs-string">&quot;:80&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>åœ¨å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™å¾ˆæ™šäº†ï¼Œæˆ‘å¬åˆ°æ¥¼ä¸‹å‡ ä¸ªå°‘å¹´å¤§å£°å”±ç€ã€Šæµ·é˜”å¤©ç©ºã€‹ã€‚æš‘å‡é‡Œï¼Œå‡ ä¸ªå¥½æœ‹å‹ä¸€èµ·å–ï¼Œå–åˆ°å¾ˆæ™šå›å®¶è·¯ä¸Šä¸€è·¯é«˜æ­Œï¼Œæ”¾è‚†çš„äº«å—ç€å¹´è½»çš„è‡ªå·±â€¦â€¦ </p><p>æˆ‘åº”è¯¥ä¹Ÿæœ‰è¿™æ ·æ”¾é£è‡ªæˆ‘çš„æ—¶å€™ï¼Œä½†æ˜¯å·²ç»è®°ä¸å¤ªæ¸…äº†ã€‚æˆ‘æŠŠè¿™äº‹å‘Šè¯‰æœ‹å‹ã€‚ä»–è¯´ï¼Œç»™ä»–ä¸€ç¬”é’±ä»–ä¹Ÿæµ·é˜”å¤©ç©ºğŸ¤£ğŸ¤£ </p><p><strong>over~</strong> </p>]]></content>
    
    
    
    <tags>
      
      <tag>go</tag>
      
      <tag>gin</tag>
      
      <tag>å­¦ä¹ è®°å½•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­¤é¡µä½œä¸ºæµ‹è¯•é¡µ</title>
    <link href="/2023/07/26/test/"/>
    <url>/2023/07/26/test/</url>
    
    <content type="html"><![CDATA[<p>ç¢ç¢å¿µâ€¦</p><span id="more"></span><p>ç°åœ¨å¥½å¤šåœ°æ–¹è¿˜æ¯”è¾ƒç®€é™‹ï¼Œå…ˆè®°ä¸‹æ¥ï¼š</p><ul><li><del>é¦–é¡µçš„æ–‡å­—è®¾ä¸ºæ˜¾ç¤ºå°é¢æ›´å¥½ï¼Œæ˜¾ç¤ºä¸€å¤§æ®µæ–‡å­—çœ‹ç€éš¾å—</del></li><li><del>ä»£ç æ¡†çš„æ ·å¼å¾—æ¢æ‰ï¼Œå¤ªä¸‘äº†ï¼Œæƒ³æ¢æˆmacä¸»é¢˜çš„</del></li><li><del>æˆ‘éœ€è¦ä¸€ä¸ªä¸´æ—¶çš„ï¼Œç§å¯†çš„å‘å¸ƒé¡µâ€¦</del></li><li>ä¸€äº›å°é¢å›¾è¿˜æ²¡æœ‰æ”¹ï¼Œä¸»è¦æ˜¯æ²¡æœ‰åˆé€‚çš„å›¾äº†ğŸ¤£</li><li>gitalk åŸæ¥ä¹Ÿä¸èƒ½è®©æœªç™»å½•ç”¨æˆ·è¯„è®ºå•Šï¼Œè¿˜ä»¥ä¸ºå¯ä»¥å‘¢â€¦</li><li>è¦ç»™ä¸€äº›æ–‡ç« åŠ ä¸Šé”ï¼Œå¯æ˜¯åœ¨æ–‡ç« å‰é¢æ·»åŠ å­—æ®µä¹Ÿæ²¡ç”¨ğŸ˜¥</li></ul><p>å…ˆè¿™æ ·ï¼Œç­‰æˆ‘æ…¢æ…¢æ”¹å§</p>]]></content>
    
    
    
    <tags>
      
      <tag>test</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/07/19/hello-world/"/>
    <url>/2023/07/19/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
